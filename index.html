<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>ONE Barangay E-Service System</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    rel="stylesheet"
  />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet" />
  <style>
    /* Custom styles for side dropdown */
    .dropdown-container {
      position: relative;
      width: 100%;
      max-width: none; /* Allow full width */
    }
    .dropdown-menu {
      position: absolute;
      top: 0;
      left: 100%;
      margin-left: 0.5rem;
      background: white;
      border-radius: 0.5rem;
      box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
      max-height: 15rem;
      overflow-y: auto;
      min-width: 16rem;
      z-index: 40;
      display: none;
    }
    .dropdown-menu.show {
      display: block;
    }
    /* Scrollbar styling for dropdown */
    .dropdown-menu::-webkit-scrollbar {
      width: 6px;
    }
    .dropdown-menu::-webkit-scrollbar-thumb {
      background-color: #7f1d1d;
      border-radius: 3px;
    }
    button, select, input {
      font-family: 'Montserrat', sans-serif;
    }
  </style>
</head>
<body class="bg-white min-h-screen flex flex-col">
  <!-- Splash Screen -->
  <div
    id="splashScreen"
    class="fixed inset-0 bg-gradient-to-b from-[#4b0000] via-[#800000] to-[#4b0000] flex cursor-pointer select-none z-50"
  >
    <div class="flex flex-1 items-center justify-center">
      <img
        src="https://i.imgur.com/MYIBL05.png"
        alt="Barangay related design with traditional Filipino village and community symbols in warm red and brown tones"
        class="w-full h-full object-contain max-w-none max-h-full"
        style="max-width:none; max-height:none;"
      />
    </div>
    <div class="flex flex-1 flex-col items-center justify-center text-center px-0">
      <h1 class="text-white font-bold text-7xl sm:text-8xl leading-tight mb-8 max-w-6xl px-2">
        Barangay<br>E-Services
      </h1>
      <p class="text-white text-xl sm:text-2xl font-semibold select-none px-0">
        Tap anywhere to continue
      </p>
    </div>
  </div>

  <!-- Main Screen -->
  <div id="mainScreen" class="hidden flex flex-col min-h-screen">
    <header
      class="bg-[#800000] flex justify-between items-center p-8 rounded-b-md"
    >
    <h1 class="text-white font-bold text-6xl sm:text-6xl" style="font-family: 'Montserrat', sans-serif;">
        Barangay E-Service System
      </h1>
      <img
        alt="Barangay Logo with traditional Filipino village emblem in red and brown colors"
        class="h-20 w-auto"
        height="55"
        width="60"
        src="https://i.imgur.com/MYIBL05.png"
      />
    </header>
    <main class="px-5 py-12 max-w-[1200px] mx-auto flex flex-col gap-7 flex-grow">
      <div class="grid grid-cols-5 sm:grid-cols-3 gap-6">
        <button
        class="text-center text-white text-4xl font-semibold rounded-lg py-12 px-15 bg-gradient-to-r from-[#7f1d1d] to-[#4b0000] transition-all duration-300 ease-in-out hover:scale-105"
        type="button"
        onclick="openForm('barangayID')"
        style="font-family: 'Montserrat', sans-serif; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);"
        onmouseover="this.style.boxShadow='0 6px 18px 2px rgba(139, 0, 0, 0.5)'"
        onmouseout="this.style.boxShadow='0 4px 6px rgba(0, 0, 0, 0.5)'"
      >
        BARANGAY ID
      </button>

        <button
        class="text-center text-white text-4xl font-semibold rounded-lg py-14 px-10 bg-gradient-to-r from-[#7f1d1d] to-[#4b0000] transition-all duration-300 ease-in-out hover:scale-105"
        type="button"
        onclick="openForm('barangayClearance')"
        style="font-family: 'Montserrat', sans-serif; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);"
        onmouseover="this.style.boxShadow='0 6px 18px 2px rgba(139, 0, 0, 0.5)'"
        onmouseout="this.style.boxShadow='0 4px 6px rgba(0, 0, 0, 0.5)'"
        >
          BARANGAY CLEARANCE
        </button>

        <button
        class="text-center text-white text-4xl font-semibold rounded-lg py-12 px-8 bg-gradient-to-r from-[#7f1d1d] to-[#4b0000] transition-all duration-300 ease-in-out hover:scale-105"
        type="button"
        onclick="openForm('barangayIndigency')"
        style="font-family: 'Montserrat', sans-serif; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);"
        onmouseover="this.style.boxShadow='0 6px 18px 2px rgba(139, 0, 0, 0.5)'"
        onmouseout="this.style.boxShadow='0 4px 6px rgba(0, 0, 0, 0.5)'"
        >
          BARANGAY INDIGENCY
        </button>

        <!-- Certificates Dropdown side -->
      <div class="dropdown-container">
        <button
          id="certificatesBtn"
          class="w-full text-center text-white text-4xl font-semibold rounded-lg py-12 px-8 bg-gradient-to-r from-[#7f1d1d] to-[#4b0000] transition-all duration-300 ease-in-out hover:scale-105 flex justify-center items-center shadow-lg hover:brightness-110 transition space-x-3"
          type="button"
          style="font-family: 'Montserrat', sans-serif; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);"
          onmouseover="this.style.boxShadow='0 6px 18px 2px rgba(139, 0, 0, 0.5)'"
          onmouseout="this.style.boxShadow='0 4px 6px rgba(0, 0, 0, 0.5)'"
          aria-expanded="false"
          aria-controls="certificatesDropdown"
          onclick="toggleBottomDropdown('certificatesDropdown', 'certificatesBtn')"
        >
        <span>CERTIFICATES</span>
        <i class="fas fa-caret-down text-3xl transition-transform" id="certificatesIcon"></i>
      </button>
      <ul
        id="certificatesDropdown"
        class="dropdown-menu"
        role="menu"
        aria-labelledby="certificatesBtn"
        >
          <li>
            <button
            class="w-full text-left px-6 py-3 hover:bg-[#f94e4e] hover:text-white transition text-gray-800 text-lg"
            type="button"
            onclick="openForm('barangayResidency')"
            >
              Barangay Residency
            </button>
          </li>
          <li>
            <button
              class="w-full text-left px-6 py-3 hover:bg-[#f94e4e] hover:text-white transition text-gray-800 text-lg"
              type="button"
              onclick="openForm('goodMoral')"
            >
              Good Moral Character
            </button>
          </li>
          <li>
            <button
              class="w-full text-left px-6 py-3 hover:bg-[#f94e4e] hover:text-white transition text-gray-800 text-lg"
              type="button"
              onclick="openForm('soloParent')"
            >
              Solo Parent
            </button>
          </li>
          <li>
            <button
              class="w-full text-left px-6 py-3 hover:bg-[#f94e4e] hover:text-white transition text-gray-800 text-lg"
              type="button"
              onclick="openForm('unemployment')"
            >
              Unemployment
            </button>
          </li>
          <li>
            <button
              class="w-full text-left px-6 py-3 hover:bg-[#f94e4e] hover:text-white transition text-gray-800 text-lg"
              type="button"
              onclick="openForm('lowIncome')"
            >
              Certificate of Low Income
            </button>
          </li>
          <li>
            <button
              class="w-full text-left px-6 py-3 hover:bg-[#f94e4e] hover:text-white transition text-gray-800 text-lg"
              type="button"
              onclick="openForm('firstTimeJobSeeker')"
            >
              First Time Job Seeker
            </button>
          </li>
        </ul>
      </div>

        <!-- Permit Dropdown side -->
      <div class="dropdown-container">
        <button
          id="permitBtn"
          class="w-full text-center text-white text-4xl font-semibold rounded-lg py-12 px-8 bg-gradient-to-r from-[#7f1d1d] to-[#4b0000] transition-all duration-300 ease-in-out hover:scale-105 flex justify-center items-center shadow-lg hover:brightness-110 transition space-x-3"
          type="button"
          style="font-family: 'Montserrat', sans-serif; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);"
          onmouseover="this.style.boxShadow='0 6px 18px 2px rgba(139, 0, 0, 0.5)'"
          onmouseout="this.style.boxShadow='0 4px 6px rgba(0, 0, 0, 0.5)'"
          aria-expanded="false"
          aria-controls="permitDropdown"
          onclick="toggleBottomDropdown('permitDropdown', 'permitBtn')"
        >
          <span>PERMIT</span>
          <i class="fas fa-caret-down text-4xl transition-transform" id="permitIcon"></i>
        </button>
        <ul
          id="permitDropdown"
          class="dropdown-menu"
          role="menu"
          aria-labelledby="permitBtn"
        >
        <li>
          <button
            class="w-full text-left px-6 py-3 hover:bg-[#f94e4e] hover:text-white transition text-gray-800 text-lg"
            type="button"
            onclick="openForm('businessPermit')"
          >
            Business Permit
          </button>
        </li>
        <li>
          <button
            class="w-full text-left px-6 py-3 hover:bg-[#f94e4e] hover:text-white transition text-gray-800 text-lg"
            type="button"
            onclick="openForm('buildingPermit')"
          >
            Building Permit
          </button>
        </li>
          <li>
            <button
              class="w-full text-left px-6 py-3 hover:bg-[#f94e4e] hover:text-white transition text-gray-800 text-lg"
              type="button"
              onclick="openForm('sanitaryPermit')"
              >
                Sanitary Permit
              </button>
          </li>
        </ul>
      </div>
    </main>
  </div>

 <!-- Form Modal -->
 <div
 id="formModal"
 class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50 overflow-auto"
>
 <div class="bg-white rounded-lg max-w-xl w-full shadow-lg overflow-hidden flex flex-col max-h-[90vh]">
   <!-- Barangay ID Forms -->
<form id="barangayIDStep1" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
  <h2 class="text-xl font-semibold mb-4">Barangay ID - Resident Information</h2>
  <div>
    <label class="block font-medium mb-1" for="idFullName">Full Name (Surname, Name, M.I)</label>
    <input
      id="idFullName"
      name="idFullName"
      type="text"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter full name"
    />
  </div>
  <div>
    <label class="block font-medium mb-1" for="idSex">Sex</label>
    <select
      id="idSex"
      name="idSex"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
    >
      <option value="" disabled selected>Select sex</option>
      <option>Male</option>
      <option>Female</option>
    </select>
  </div>
  <div>
    <label class="block font-medium mb-1" for="idDOB">Date of Birth</label>
    <input
      id="idDOB"
      name="idDOB"
      type="date"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
    />
  </div>
  <div>
    <label class="block font-medium mb-1" for="idNationality">Nationality</label>
    <input
      id="idNationality"
      name="idNationality"
      type="text"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter nationality"
    />
  </div>
  <div>
    <label class="block font-medium mb-1" for="idDateResidency">Date of Residency</label>
    <input
      id="idDateResidency"
      name="idDateResidency"
      type="date"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
    />
  </div>
  <div>
    <label class="block font-medium mb-1" for="idContactNumber">Contact Number</label>
    <input
      id="idContactNumber"
      name="idContactNumber"
      type="text"
      inputmode="numeric"
      pattern="^\d{11,15}$"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter contact number (11-15 digits)"
      oninput="this.value = this.value.replace(/[^0-9]/g, '')"
    />
    <p id="idContactNumberError" class="text-red-600 text-sm mt-1 hidden">Contact number must be 11 to 15 digits.</p>
  </div>
  <div>
    <label class="block font-medium mb-1" for="idAddress">Address</label>
    <input
      id="idAddress"
      name="idAddress"
      type="text"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter address"
    />
  </div>
  <div class="flex justify-end space-x-3 pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="closeForm()"
    >
      Cancel
    </button>
    <button
      type="submit"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
    >
      Next
    </button>
  </div>
</form>

<!-- Updated Barangay ID Step 2 Form -->
<form id="barangayIDStep2" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
  <h2 class="text-xl font-semibold mb-4">Barangay ID - Emergency Contact Information</h2>
  <div>
    <label class="block font-medium mb-1" for="idEmergencyName">Emergency Contact Name</label>
    <input
      id="idEmergencyName"
      name="idEmergencyName"
      type="text"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter emergency contact name"
    />
  </div>
  <div>
    <label class="block font-medium mb-1" for="idEmergencyRelationship">Relationship</label>
    <input
      id="idEmergencyRelationship"
      name="idEmergencyRelationship"
      type="text"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter relationship (e.g., Father, Mother)"
    />
  </div>
  <div>
    <label class="block font-medium mb-1" for="idEmergencyContact">Emergency Contact Number</label>
    <input
      id="idEmergencyContact"
      name="idEmergencyContact"
      type="text"
      inputmode="numeric"
      pattern="^\d{11,15}$"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter emergency contact number (11-15 digits)"
      oninput="this.value = this.value.replace(/[^0-9]/g, '')"
    />
    <p id="idEmergencyContactError" class="text-red-600 text-sm mt-1 hidden">Emergency contact number must be 11 to 15 digits.</p>
  </div>
  <div class="flex justify-between pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="barangayIDGoBackToStep1()"
    >
      Back
    </button>
    <button
      type="submit"
      class="bg-[#7f1d1d] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
    >
      Next
    </button>
  </div>
</form>
<!--Updated Barangay ID Step 2b Form-->
<form id="barangayIDStep2b" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
  <h2 class="text-xl font-semibold mb-4">Barangay ID - Declaration</h2>
  <div class="bg-gray-50 p-4 rounded border border-gray-200">
    <label class="flex items-start">
      <input
        type="checkbox"
        name="idDeclaration"
        required
        class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
      >
      <span class="ml-2">
        I hereby declare that the information I have provided is true and correct to the best of my knowledge. 
        I understand that any false information may lead to rejection of my request or legal consequences.
      </span>
    </label>
  </div>
  <div class="flex justify-between pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="barangayIDGoBackToStep2()"
    >
      Back
    </button>
    <button
      type="submit"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
    >
      Next
    </button>
  </div>
</form>

<!-- Updated Barangay ID Step 3 Confirmation -->
<div id="barangayIDStep3" class="p-6 space-y-4 hidden overflow-y-auto">
  <h2 class="text-xl font-semibold mb-4">Barangay ID - Confirm Your Information</h2>
  <div>
    <p><strong>Full Name:</strong> <span id="idConfirmFullName"></span></p>
    <p><strong>Sex:</strong> <span id="idConfirmSex"></span></p>
    <p><strong>Date of Birth:</strong> <span id="idConfirmDOB"></span></p>
    <p><strong>Nationality:</strong> <span id="idConfirmNationality"></span></p>
    <p><strong>Date of Residency:</strong> <span id="idConfirmDateResidency"></span></p>
    <p><strong>Contact Number:</strong> <span id="idConfirmContactNumber"></span></p>
    <p><strong>Address:</strong> <span id="idConfirmAddress"></span></p>
    <p><strong>Emergency Contact Name:</strong> <span id="idConfirmEmergencyName"></span></p>
    <p><strong>Relationship:</strong> <span id="idConfirmEmergencyRelationship"></span></p>
    <p><strong>Emergency Contact Number:</strong> <span id="idConfirmEmergencyContact"></span></p>
  </div>
  <div class="flex justify-between pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="barangayIDEdit()"
    >
      Edit
    </button>
    <button
      type="button"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      onclick="barangayIDGoToSend()"
    >
      Confirm
    </button>
  </div>
</div>

   <div id="barangayIDStep4" class="p-6 space-y-4 hidden overflow-y-auto">
     <h2 class="text-xl font-semibold mb-4">Barangay ID - Send Request</h2>
     <div class="flex justify-between pt-4">
       <button
         type="button"
         class="bg-gray-300 text-gray-700 rounded px-4 py-2"
         onclick="barangayIDBackToConfirmation()"
       >
         Cancel
       </button>
       <button
         type="button"
         class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
         onclick="barangayIDSendRequest()"
       >
         Send
       </button>
     </div>
   </div>

   <div id="barangayIDStep5" class="p-6 space-y-4 hidden text-center overflow-y-auto">
     <h2 class="text-xl font-semibold mb-4 text-green-600">Request Sent!</h2>
     <p>Thank you for your request. The barangay admin will process it shortly.</p>
     <button
       type="button"
       class="mt-6 bg-[#800000] text-white rounded px-6 py-2 hover:bg-[#5a0000]"
       onclick="closeForm()"
     >
       Close
     </button>
   </div>

   <!-- Other forms remain unchanged -->
<!-- Sanitary Permit Forms -->
   <form id="sanitaryPermitStep1" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Sanitary Permit - Applicant Information</h2>
    
    <!-- Important Note -->
    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <p class="text-sm text-yellow-700">
            <strong>Important:</strong> To proceed with your Sanitary Permit request, you must present any of the following supporting documents:
            <br><b>*Valid Government-issued ID</b>
            <br><b>*FulLy accomplished Health Certificate</b> (for food-related businesses)
            <br><b>*Business Sketch or Location Plan</b>
            <br><b>*Previous Sanitary Permit</b> (for renewal)
            <br><b>*Proof of Business Ownership</b> (e.g., DTI registration, lease contract)
          </p>
        </div>
      </div>
    </div>
  
    <div>
      <label class="block font-medium mb-1" for="spFullName">Full Name (Surname, Name, M.I)</label>
      <input
        id="spFullName"
        name="spFullName"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter full name"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="spContactNumber">Contact Number</label>
      <input
        id="spContactNumber"
        name="spContactNumber"
        type="text"
        inputmode="numeric"
        pattern="^\d{11,15}$"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter contact number (11-15 digits)"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />
      <p id="spContactNumberError" class="text-red-600 text-sm mt-1 hidden">Contact number must be 11 to 15 digits.</p>
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="spAddress">Complete Address</label>
      <textarea
        id="spAddress"
        name="spAddress"
        required
        rows="3"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter complete address"
      ></textarea>
    </div>
    
    <div class="flex justify-end space-x-3 pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="closeForm()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="sanitaryPermitStep2" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Sanitary Permit - Business Details</h2>
    
    <div>
      <label class="block font-medium mb-1" for="spBusinessName">Business/Establishment Name</label>
      <input
        id="spBusinessName"
        name="spBusinessName"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter business name"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="spNature">Nature of Business</label>
      <select
        id="spNature"
        name="spNature"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        onchange="toggleOtherNature(this)"
      >
        <option value="" disabled selected>Select nature of business</option>
        <option>Food Stall</option>
        <option>Carinderia / Eatery</option>
        <option>Bakery</option>
        <option>Grocery / Mini-Mart</option>
        <option>Pharmacy</option>
        <option>Water Refilling Station</option>
        <option>Laundry Shop</option>
        <option>Salon / Barbershop</option>
        <option>Sari-Sari Store</option>
        <option>Internet Café</option>
        <option>Retail Store</option>
        <option value="Other">Other (please specify)</option>
      </select>
    </div>
    
    <div id="spOtherNatureContainer" class="hidden">
      <label class="block font-medium mb-1" for="spOtherNature">Please specify nature of business</label>
      <input
        id="spOtherNature"
        name="spOtherNature"
        type="text"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter nature of business"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="spBusinessAddress">Business Address</label>
      <textarea
        id="spBusinessAddress"
        name="spBusinessAddress"
        required
        rows="3"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter business address"
      ></textarea>
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="spPremisesType">Type of Premises</label>
      <select
        id="spPremisesType"
        name="spPremisesType"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        onchange="toggleOtherPremises(this)"
      >
        <option value="" disabled selected>Select type of premises</option>
        <option>Food Establishment</option>
        <option>Retail Store</option>
        <option>Salon/Barbershop</option>
        <option value="Other">Other (specify)</option>
      </select>
    </div>
    
    <div id="spOtherPremisesContainer" class="hidden">
      <label class="block font-medium mb-1" for="spOtherPremises">Please specify type of premises</label>
      <input
        id="spOtherPremises"
        name="spOtherPremises"
        type="text"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter type of premises"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="spEmployees">Number of Employees</label>
      <input
        id="spEmployees"
        name="spEmployees"
        type="number"
        min="0"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter number of employees"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="spStartDate">Business Start Date</label>
      <input
        id="spStartDate"
        name="spStartDate"
        type="date"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      />
    </div>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="sanitaryPermitGoBackToStep1()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="sanitaryPermitStep3" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Sanitary Permit - Declaration</h2>
    
    <div class="bg-gray-50 p-4 rounded border border-gray-200">
      <label class="flex items-start">
        <input
          type="checkbox"
          name="spDeclaration"
          required
          class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
        >
        <span class="ml-2">
          I declare that I am a resident of this barangay and that the information provided is true and correct. 
          I understand that any false claims may result in disqualification from assistance or revocation of this permit.
        </span>
      </label>
    </div>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="sanitaryPermitGoBackToStep2()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <div id="sanitaryPermitStep4" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Sanitary Permit - Confirm Your Information</h2>
    
    <div>
      <h3 class="font-medium text-lg mb-2">Applicant Information</h3>
      <p><strong>Full Name:</strong> <span id="spConfirmFullName"></span></p>
      <p><strong>Contact Number:</strong> <span id="spConfirmContactNumber"></span></p>
      <p><strong>Address:</strong> <span id="spConfirmAddress"></span></p>
      
      <h3 class="font-medium text-lg mt-4 mb-2">Business Details</h3>
      <p><strong>Business Name:</strong> <span id="spConfirmBusinessName"></span></p>
      <p><strong>Nature of Business:</strong> <span id="spConfirmNature"></span></p>
      <p id="spConfirmOtherNature" class="hidden"><strong>Other Nature:</strong> <span></span></p>
      <p><strong>Business Address:</strong> <span id="spConfirmBusinessAddress"></span></p>
      <p><strong>Type of Premises:</strong> <span id="spConfirmPremisesType"></span></p>
      <p id="spConfirmOtherPremises" class="hidden"><strong>Other Premises:</strong> <span></span></p>
      <p><strong>Number of Employees:</strong> <span id="spConfirmEmployees"></span></p>
      <p><strong>Business Start Date:</strong> <span id="spConfirmStartDate"></span></p>
    </div>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="sanitaryPermitEdit()"
      >
        Edit
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="sanitaryPermitGoToSend()"
      >
        Confirm
      </button>
    </div>
  </div>
  
  <div id="sanitaryPermitStep5" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Sanitary Permit - Final Action</h2>
    <p class="mb-4">Submit your request for Barangay Sanitary Permit.</p>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="sanitaryPermitBackToConfirmation()"
      >
        Cancel
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="sanitaryPermitSendRequest()"
      >
        Send
      </button>
    </div>
  </div>
  
  <div id="sanitaryPermitStep6" class="p-6 space-y-4 hidden text-center overflow-y-auto">
    <div class="text-green-600 mb-4">
      <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
    </div>
    <h2 class="text-xl font-semibold mb-4 text-green-600">Request Sent!</h2>
    <p>Thank you. The Barangay will review your documents and process your request.</p>
    
    <button
      type="button"
      class="mt-6 bg-[#800000] text-white rounded px-6 py-2 hover:bg-[#5a0000]"
      onclick="closeForm()"
    >
      Close
    </button>
  </div>

   <!--Barangay Building Permit-->
   <form id="buildingPermitStep1" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Building Permit - Applicant Information</h2>
    
    <!-- Important Note -->
    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <p class="text-sm text-yellow-700">
            <strong>Important:</strong> To proceed with your Barangay Building Permit request, you must present any of the following supporting documents for validation:
            <br><b>*Photocopy of Valid Government-issued ID</b>
            <br><b>*Proof of Lot Ownership</b> (e.g., land title, tax declaration, lease contract)
            <br><b>*Building Sketch or Site Plan</b> (basic drawing is acceptable)
            <br><b>*Authorization Letter</b> (if the applicant is not the lot owner)
            <br><b>*Clearance from Homeowners' Association or Subdivision</b> (if applicable)
            <br><b>*Previous Barangay Permit</b> (for renovation or repair cases)
          </p>
        </div>
      </div>
    </div>
  
    <div>
      <label class="block font-medium mb-1" for="bpFullName">Full Name (Surname, Name, M.I)</label>
      <input
        id="bpFullName"
        name="bpFullName"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter full name"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpContactNumber">Contact Number</label>
      <input
        id="bpContactNumber"
        name="bpContactNumber"
        type="text"
        inputmode="numeric"
        pattern="^\d{11,15}$"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter contact number (11-15 digits)"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />
      <p id="bpContactNumberError" class="text-red-600 text-sm mt-1 hidden">Contact number must be 11 to 15 digits.</p>
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpAddress">Complete Address</label>
      <textarea
        id="bpAddress"
        name="bpAddress"
        required
        rows="3"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter complete address"
      ></textarea>
    </div>
    
    <div class="flex justify-end space-x-3 pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="closeForm()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="buildingPermitStep2" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Building Permit - Building Project Details</h2>
    
    <div>
      <label class="block font-medium mb-1" for="bpConstructionType">Type of Construction</label>
      <select
        id="bpConstructionType"
        name="bpConstructionType"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select type</option>
        <option>New Construction</option>
        <option>Renovation</option>
        <option>Extension</option>
        <option>Repair</option>
      </select>
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpPurpose">Purpose of Construction</label>
      <input
        id="bpPurpose"
        name="bpPurpose"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="e.g., Residential, Commercial"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpLocation">Location of Construction (Project Site)</label>
      <textarea
        id="bpLocation"
        name="bpLocation"
        required
        rows="3"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter complete project site address"
      ></textarea>
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpEstimatedCost">Estimated Cost of Construction (₱)</label>
      <input
        id="bpEstimatedCost"
        name="bpEstimatedCost"
        type="number"
        min="0"
        step="1000"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter estimated cost"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpLotOwner">Name of Lot Owner</label>
      <input
        id="bpLotOwner"
        name="bpLotOwner"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter lot owner's name"
      />
    </div>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="buildingPermitGoBackToStep1()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="buildingPermitStep3" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Building Permit - Declaration</h2>
    
    <div class="bg-gray-50 p-4 rounded border border-gray-200">
      <label class="flex items-start">
        <input
          type="checkbox"
          name="bpDeclaration"
          required
          class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
        >
        <span class="ml-2">
          I declare that I am a resident of this barangay and that the information provided is true and correct. 
          I understand that any false claims may result in disqualification from assistance or revocation of this permit.
        </span>
      </label>
    </div>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="buildingPermitGoBackToStep2()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <div id="buildingPermitStep4" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Building Permit - Confirm Your Information</h2>
    
    <div>
      <p><strong>Full Name:</strong> <span id="bpConfirmFullName"></span></p>
      <p><strong>Contact Number:</strong> <span id="bpConfirmContactNumber"></span></p>
      <p><strong>Address:</strong> <span id="bpConfirmAddress"></span></p>
      <p><strong>Type of Construction:</strong> <span id="bpConfirmConstructionType"></span></p>
      <p><strong>Purpose of Construction:</strong> <span id="bpConfirmPurpose"></span></p>
      <p><strong>Location of Project:</strong> <span id="bpConfirmLocation"></span></p>
      <p><strong>Estimated Cost:</strong> <span id="bpConfirmEstimatedCost"></span></p>
      <p><strong>Lot Owner's Name:</strong> <span id="bpConfirmLotOwner"></span></p>
    </div>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="buildingPermitEdit()"
      >
        Edit
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="buildingPermitGoToSend()"
      >
        Confirm
      </button>
    </div>
  </div>
  
  <div id="buildingPermitStep5" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Building Permit - Final Action</h2>
    <p class="mb-4">Submit your request for Barangay Building Permit.</p>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="buildingPermitBackToConfirmation()"
      >
        Cancel
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="buildingPermitSendRequest()"
      >
        Send
      </button>
    </div>
  </div>
  
  <div id="buildingPermitStep6" class="p-6 space-y-4 hidden text-center overflow-y-auto">
    <div class="text-green-600 mb-4">
      <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
    </div>
    <h2 class="text-xl font-semibold mb-4 text-green-600">Request Sent!</h2>
    <p>Thank you. The Barangay will verify your submitted documents and begin processing your permit.</p>
    
    <button
      type="button"
      class="mt-6 bg-[#800000] text-white rounded px-6 py-2 hover:bg-[#5a0000]"
      onclick="closeForm()"
    >
      Close
    </button>
  </div>
    <!-- Barangay Business Permit-->
    
   <form id="businessPermitStep1" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Business Permit - Owner Information</h2>
    
<!-- Important Note for Business Permit -->
<div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
  <div class="flex">
    <div class="flex-shrink-0">
      <svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
      </svg>
    </div>
    <div class="ml-3">
      <p class="text-sm text-yellow-700">
        <strong>Important:</strong> You <u>must</u> present <b><i>any of the following</i></b> supporting documents to process your Business Permit. Without these, your application <b>cannot proceed</b>.
        <br><b>*Valid Government ID:</b> Passport, Driver’s License, UMID, etc.
        <br><b>*Proof of Residence:</b> Utility bill or Barangay Clearance.
        <br><b>*For Rented Spaces:</b> Lease Contract or Landowner Authorization.
        <br><b>*For New Businesses:</b> DTI Certificate of Business Name Registration.
        <br><b>*Location Proof:</b> Sketch or map of business address.
        <br><b>*For Renewals:</b> Previous Barangay Permit.
      </p>
    </div>
  </div>
</div>

    <div>
      <label class="block font-medium mb-1" for="bpFullName">Full Name of Applicant (Surname, Name, M.I)</label>
      <input
        id="bpFullName"
        name="bpFullName"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter full name"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpDOB">Date of Birth</label>
      <input
        id="bpDOB"
        name="bpDOB"
        type="date"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpSex">Sex</label>
      <select
        id="bpSex"
        name="bpSex"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select sex</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
      </select>
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpCivilStatus">Civil Status</label>
      <select
        id="bpCivilStatus"
        name="bpCivilStatus"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select civil status</option>
        <option>Single</option>
        <option>Married</option>
        <option>Widowed</option>
        <option>Separated</option>
      </select>
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpContactNumber">Contact Number</label>
      <input
        id="bpContactNumber"
        name="bpContactNumber"
        type="text"
        inputmode="numeric"
        pattern="^\d{11,15}$"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter contact number (11-15 digits)"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />
      <p id="bpContactNumberError" class="text-red-600 text-sm mt-1 hidden">Contact number must be 11 to 15 digits.</p>
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpEmail">Email Address (Optional)</label>
      <input
        id="bpEmail"
        name="bpEmail"
        type="email"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter email address"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpAddress">Complete Home Address</label>
      <textarea
        id="bpAddress"
        name="bpAddress"
        required
        rows="3"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter complete home address"
      ></textarea>
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpYearsResidency">Years of Residency in Barangay</label>
      <input
        id="bpYearsResidency"
        name="bpYearsResidency"
        type="number"
        min="0"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter number of years"
      />
    </div>
    
    <div class="flex justify-end space-x-3 pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="closeForm()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="businessPermitStep2" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Business Permit - Business Information</h2>
    
    <div>
      <label class="block font-medium mb-1" for="bpBusinessName">Business Name</label>
      <input
        id="bpBusinessName"
        name="bpBusinessName"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter business name"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpBusinessType">Type of Business</label>
      <select
        id="bpBusinessType"
        name="bpBusinessType"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select business type</option>
        <option>Sole Proprietorship</option>
        <option>Partnership</option>
        <option>Corporation</option>
        <option>Others</option>
      </select>
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpNature">Nature of Business</label>
      <input
        id="bpNature"
        name="bpNature"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="e.g. Retail, Sari-sari Store, Online Selling"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpBusinessAddress">Business Address</label>
      <textarea
        id="bpBusinessAddress"
        name="bpBusinessAddress"
        required
        rows="3"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter business address"
      ></textarea>
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpBusinessContact">Business Contact Number</label>
      <input
        id="bpBusinessContact"
        name="bpBusinessContact"
        type="text"
        inputmode="numeric"
        pattern="^\d{11,15}$"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter business contact number (11-15 digits)"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />
      <p id="bpBusinessContactError" class="text-red-600 text-sm mt-1 hidden">Contact number must be 11 to 15 digits.</p>
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpStartDate">Start of Business Operations</label>
      <input
        id="bpStartDate"
        name="bpStartDate"
        type="date"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1" for="bpEmployees">Number of Employees</label>
      <input
        id="bpEmployees"
        name="bpEmployees"
        type="number"
        min="0"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter number of employees"
      />
    </div>
    
    <div>
      <label class="block font-medium mb-1">Is your business located in your residence?</label>
      <div class="flex space-x-4">
        <label class="flex items-center">
          <input type="radio" name="bpSameAddress" value="Yes" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]" required>
          <span class="ml-2">Yes</span>
        </label>
        <label class="flex items-center">
          <input type="radio" name="bpSameAddress" value="No" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
          <span class="ml-2">No</span>
        </label>
      </div>
    </div>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="businessPermitGoBackToStep1()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="businessPermitStep3" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Business Permit - Purpose of Request</h2>
    
    <div>
      <label class="block font-medium mb-1" for="bpPurpose">Purpose of Barangay Business Clearance</label>
      <select
        id="bpPurpose"
        name="bpPurpose"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select purpose</option>
        <option>New Business Registration</option>
        <option>Renewal</option>
        <option>Requirement for Mayor's Permit</option>
        <option>Other (Specify)</option>
      </select>
    </div>
    
    <div id="bpOtherPurposeContainer" class="hidden">
      <label class="block font-medium mb-1" for="bpOtherPurpose">If Other, please specify</label>
      <input
        id="bpOtherPurpose"
        name="bpOtherPurpose"
        type="text"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter purpose"
      />
    </div>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="businessPermitGoBackToStep2()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="businessPermitStep4" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Business Permit - Declaration</h2>
    
    <div class="bg-gray-50 p-4 rounded border border-gray-200">
      <label class="flex items-start">
        <input
          type="checkbox"
          name="bpDeclaration"
          required
          class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
        >
        <span class="ml-2">
          I declare that I am a resident of this barangay and that the information provided is true and correct. 
          I understand that any false claims may result in disqualification from any assistance programs.
        </span>
      </label>
    </div>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="businessPermitGoBackToStep3()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <div id="businessPermitStep5" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Business Permit - Confirm Your Information</h2>
    
    <div>
      <h3 class="font-medium text-lg mb-2">Owner Information</h3>
      <p><strong>Full Name:</strong> <span id="bpConfirmFullName"></span></p>
      <p><strong>Date of Birth:</strong> <span id="bpConfirmDOB"></span></p>
      <p><strong>Sex:</strong> <span id="bpConfirmSex"></span></p>
      <p><strong>Civil Status:</strong> <span id="bpConfirmCivilStatus"></span></p>
      <p><strong>Contact Number:</strong> <span id="bpConfirmContactNumber"></span></p>
      <p><strong>Email:</strong> <span id="bpConfirmEmail"></span></p>
      <p><strong>Home Address:</strong> <span id="bpConfirmAddress"></span></p>
      <p><strong>Years of Residency:</strong> <span id="bpConfirmYearsResidency"></span></p>
      
      <h3 class="font-medium text-lg mt-4 mb-2">Business Information</h3>
      <p><strong>Business Name:</strong> <span id="bpConfirmBusinessName"></span></p>
      <p><strong>Type of Business:</strong> <span id="bpConfirmBusinessType"></span></p>
      <p><strong>Nature of Business:</strong> <span id="bpConfirmNature"></span></p>
      <p><strong>Business Address:</strong> <span id="bpConfirmBusinessAddress"></span></p>
      <p><strong>Business Contact:</strong> <span id="bpConfirmBusinessContact"></span></p>
      <p><strong>Start of Operations:</strong> <span id="bpConfirmStartDate"></span></p>
      <p><strong>Number of Employees:</strong> <span id="bpConfirmEmployees"></span></p>
      <p><strong>Business at Residence:</strong> <span id="bpConfirmSameAddress"></span></p>
      
      <h3 class="font-medium text-lg mt-4 mb-2">Purpose of Request</h3>
      <p><strong>Purpose:</strong> <span id="bpConfirmPurpose"></span></p>
      <p id="bpConfirmOtherPurpose" class="hidden"><strong>Other Purpose:</strong> <span></span></p>
    </div>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="businessPermitEdit()"
      >
        Edit
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="businessPermitGoToSend()"
      >
        Confirm
      </button>
    </div>
  </div>
  
  <div id="businessPermitStep6" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Business Permit - Final Action</h2>
    <p class="mb-4">Please confirm your request for Barangay Business Clearance.</p>
    
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="businessPermitBackToConfirmation()"
      >
        Cancel
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="businessPermitSendRequest()"
      >
        Send
      </button>
    </div>
  </div>
  
  <div id="businessPermitStep7" class="p-6 space-y-4 hidden text-center overflow-y-auto">
    <div class="text-green-600 mb-4">
      <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
    </div>
    <h2 class="text-xl font-semibold mb-4 text-green-600">Request Sent Successfully!</h2>
    <p>Thank you for applying for a Barangay Business Permit.</p>
    <p>Your request is being reviewed by the Barangay Office. Please wait for further instructions or updates.</p>
    
    <button
      type="button"
      class="mt-6 bg-[#800000] text-white rounded px-6 py-2 hover:bg-[#5a0000]"
      onclick="closeForm()"
    >
      Close
    </button>
  </div>

   <form id="jobSeekerStep1" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
  <h2 class="text-xl font-semibold mb-4">First Time Job Seeker - Personal Information</h2>
  <div>
    <label class="block font-medium mb-1" for="jsFullName">Full Name (Surname, Name, M.I)</label>
    <input
      id="jsFullName"
      name="jsFullName"
      type="text"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter full name"
    />
  </div>
  <div>
    <label class="block font-medium mb-1" for="jsDOB">Date of Birth</label>
    <input
      id="jsDOB"
      name="jsDOB"
      type="date"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
    />
  </div>
  <div>
    <label class="block font-medium mb-1" for="jsSex">Sex</label>
    <select
      id="jsSex"
      name="jsSex"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
    >
      <option value="" disabled selected>Select sex</option>
      <option>Male</option>
      <option>Female</option>
      <option>Other</option>
    </select>
  </div>
  <div>
    <label class="block font-medium mb-1" for="jsCivilStatus">Civil Status</label>
    <select
      id="jsCivilStatus"
      name="jsCivilStatus"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
    >
      <option value="" disabled selected>Select civil status</option>
      <option>Single</option>
      <option>Married</option>
      <option>Widowed</option>
      <option>Separated</option>
    </select>
  </div>
  <div>
    <label class="block font-medium mb-1" for="jsContactNumber">Contact Number</label>
    <input
      id="jsContactNumber"
      name="jsContactNumber"
      type="text"
      inputmode="numeric"
      pattern="^\d{11,15}$"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter contact number (11-15 digits)"
      oninput="this.value = this.value.replace(/[^0-9]/g, '')"
    />
    <p id="jsContactNumberError" class="text-red-600 text-sm mt-1 hidden">Contact number must be 11 to 15 digits.</p>
  </div>
  <div>
    <label class="block font-medium mb-1" for="jsAddress">Complete Address (Barangay, City, Province)</label>
    <textarea
      id="jsAddress"
      name="jsAddress"
      required
      rows="3"
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter complete address"
    ></textarea>
  </div>
  <div>
    <label class="block font-medium mb-1" for="jsYearsResidency">Years of Residency in Barangay</label>
    <input
      id="jsYearsResidency"
      name="jsYearsResidency"
      type="number"
      min="0"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter number of years"
    />
  </div>
  <div class="flex justify-end space-x-3 pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="closeForm()"
    >
      Cancel
    </button>
    <button
      type="submit"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
    >
      Next
    </button>
  </div>
</form>

<form id="jobSeekerStep2" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
  <h2 class="text-xl font-semibold mb-4">First Time Job Seeker - Educational Background</h2>
  <div>
    <label class="block font-medium mb-1" for="jsEducation">Highest Educational Attainment</label>
    <select
      id="jsEducation"
      name="jsEducation"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
    >
      <option value="" disabled selected>Select highest education</option>
      <option>High School Graduate</option>
      <option>Senior High Graduate</option>
      <option>Vocational Graduate</option>
      <option>College Level</option>
      <option>College Graduate</option>
      <option>Others</option>
    </select>
  </div>
  <div>
    <label class="block font-medium mb-1" for="jsSchoolName">School Name</label>
    <input
      id="jsSchoolName"
      name="jsSchoolName"
      type="text"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter school name"
    />
  </div>
  <div>
    <label class="block font-medium mb-1" for="jsYearGraduated">Year Graduated / Last Attended</label>
    <input
      id="jsYearGraduated"
      name="jsYearGraduated"
      type="number"
      min="1900"
      max="2025"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter year (YYYY)"
    />
  </div>
  <div class="flex justify-between pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="jobSeekerGoBackToStep1()"
    >
      Back
    </button>
    <button
      type="submit"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
    >
      Next
    </button>
  </div>
</form>

<form id="jobSeekerStep3" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
  <h2 class="text-xl font-semibold mb-4">First Time Job Seeker - Eligibility Verification</h2>
  
  <div class="bg-blue-50 p-4 rounded border border-blue-200 mb-4">
    <p class="text-blue-800"><i class="fas fa-info-circle mr-2"></i> This certificate is only for genuine first-time job seekers under RA 11261.</p>
  </div>

  <div>
    <label class="block font-medium mb-1">Is this your first time applying for employment?</label>
    <p class="text-sm text-gray-600 mb-2">This certificate is only available to those who have never been employed before.</p>
    <div class="flex space-x-4">
      <label class="flex items-center">
        <input type="radio" name="jsFirstJob" value="Yes" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]" required>
        <span class="ml-2">Yes, this is my first job application</span>
      </label>
      <label class="flex items-center">
        <input type="radio" name="jsFirstJob" value="No" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
        <span class="ml-2">No, I have worked before</span>
      </label>
    </div>
  </div>

  <div>
    <label class="block font-medium mb-1">Have you previously availed of a First Time Job Seeker certificate?</label>
    <p class="text-sm text-gray-600 mb-2">This benefit can only be used once under the law.</p>
    <div class="flex space-x-4">
      <label class="flex items-center">
        <input type="radio" name="jsReceivedBefore" value="Yes" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]" required>
        <span class="ml-2">Yes, I've used this benefit before</span>
      </label>
      <label class="flex items-center">
        <input type="radio" name="jsReceivedBefore" value="No" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
        <span class="ml-2">No, this is my first time</span>
      </label>
    </div>
  </div>

  <div id="jsEligibilityError" class="hidden bg-red-50 text-red-700 p-3 rounded border border-red-200">
    <i class="fas fa-exclamation-circle mr-2"></i>
    <span id="jsEligibilityErrorMessage"></span>
  </div>

  <!-- Rest of your form fields... -->
  <div>
    <label class="block font-medium mb-1" for="jsPurpose">Purpose of Request</label>
    <select
      id="jsPurpose"
      name="jsPurpose"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
    >
      <option value="" disabled selected>Select purpose</option>
      <option>Pre-employment Requirement</option>
      <option>Job Fair Application</option>
      <option>Government Job Application</option>
      <option>Private Sector Employment</option>
      <option>Availing of Free Documents</option>
      <option>Others</option>
    </select>
  </div>
  
  <div id="jsOtherPurposeContainer" class="hidden">
    <label class="block font-medium mb-1" for="jsOtherPurpose">Please specify</label>
    <input
      id="jsOtherPurpose"
      name="jsOtherPurpose"
      type="text"
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      placeholder="Enter purpose"
    />
  </div>

  <div class="flex justify-between pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="jobSeekerGoBackToStep2()"
    >
      Back
    </button>
    <button
      type="submit"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
    >
      Next
    </button>
  </div>
</form>

<form id="jobSeekerStep4" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
  <h2 class="text-xl font-semibold mb-4">First Time Job Seeker - Declaration and Waiver</h2>
  <div class="bg-gray-50 p-4 rounded border border-gray-200 space-y-4">
    <label class="flex items-start">
      <input
        type="checkbox"
        name="jsDeclaration1"
        required
        class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
      >
      <span class="ml-2">
        I certify that I am a first-time job seeker.
      </span>
    </label>
    <label class="flex items-start">
      <input
        type="checkbox"
        name="jsDeclaration2"
        required
        class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
      >
      <span class="ml-2">
        I understand that this certificate may only be availed once under RA 11261.
      </span>
    </label>
    <label class="flex items-start">
      <input
        type="checkbox"
        name="jsDeclaration3"
        required
        class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
      >
      <span class="ml-2">
        I declare that the information I have provided is true and correct.
      </span>
    </label>
    <label class="flex items-start">
      <input
        type="checkbox"
        name="jsDeclaration4"
        required
        class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
      >
      <span class="ml-2">
        I give permission to the Barangay and authorized government agencies to verify my claim.
      </span>
    </label>
  </div>
  <div class="flex justify-between pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="jobSeekerGoBackToStep3()"
    >
      Back
    </button>
    <button
      type="submit"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
    >
      Next
    </button>
  </div>
</form>

<div id="jobSeekerStep5" class="p-6 space-y-4 hidden overflow-y-auto">
  <h2 class="text-xl font-semibold mb-4">First Time Job Seeker - Confirm Your Information</h2>
  <div>
    <h3 class="font-medium text-lg mb-2">Personal Information</h3>
    <p><strong>Full Name:</strong> <span id="jsConfirmFullName"></span></p>
    <p><strong>Date of Birth:</strong> <span id="jsConfirmDOB"></span></p>
    <p><strong>Sex:</strong> <span id="jsConfirmSex"></span></p>
    <p><strong>Civil Status:</strong> <span id="jsConfirmCivilStatus"></span></p>
    <p><strong>Contact Number:</strong> <span id="jsConfirmContactNumber"></span></p>
    <p><strong>Address:</strong> <span id="jsConfirmAddress"></span></p>
    <p><strong>Years of Residency:</strong> <span id="jsConfirmYearsResidency"></span></p>
    
    <h3 class="font-medium text-lg mt-4 mb-2">Educational Background</h3>
    <p><strong>Highest Education:</strong> <span id="jsConfirmEducation"></span></p>
    <p><strong>School Name:</strong> <span id="jsConfirmSchoolName"></span></p>
    <p><strong>Year Graduated/Last Attended:</strong> <span id="jsConfirmYearGraduated"></span></p>
    
    <h3 class="font-medium text-lg mt-4 mb-2">Job Seeking Information</h3>
    <p><strong>Applying for first job:</strong> <span id="jsConfirmFirstJob"></span></p>
    <p><strong>Received certificate before:</strong> <span id="jsConfirmReceivedBefore"></span></p>
    <p><strong>Purpose:</strong> <span id="jsConfirmPurpose"></span></p>
    <p id="jsConfirmOtherPurpose" class="hidden"><strong>Other Purpose:</strong> <span></span></p>
  </div>
  <div class="flex justify-between pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="jobSeekerEdit()"
    >
      Edit
    </button>
    <button
      type="button"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      onclick="jobSeekerGoToSend()"
    >
      Confirm
    </button>
  </div>
</div>

<div id="jobSeekerStep6" class="p-6 space-y-4 hidden overflow-y-auto">
  <h2 class="text-xl font-semibold mb-4">First Time Job Seeker - Send Request</h2>
  <p class="mb-4">Please confirm your request for Certificate of First-Time Job Seeker.</p>
  <div class="flex justify-between pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="jobSeekerBackToConfirmation()"
    >
      Cancel
    </button>
    <button
      type="button"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      onclick="jobSeekerSendRequest()"
    >
      Send
    </button>
  </div>
</div>

<div id="jobSeekerStep7" class="p-6 space-y-4 hidden text-center overflow-y-auto">
  <div class="text-green-600 mb-4">
    <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
    </svg>
  </div>
  <h2 class="text-xl font-semibold mb-4 text-green-600">Request Sent Successfully!</h2>
  <p>Thank you for applying for a Certificate of First-Time Job Seeker.</p>
  <p>Please wait for processing by your Barangay office.</p>
  <button
    type="button"
    class="mt-6 bg-[#800000] text-white rounded px-6 py-2 hover:bg-[#5a0000]"
    onclick="closeForm()"
  >
    Close
  </button>
</div>
    <!-- Barangay Clearance Forms -->
   <form id="lowIncomeStep1" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Certificate of Low Income - Personal Information</h2>
    <div>
      <label class="block font-medium mb-1" for="liFullName">Full Name (Surname, Name, M.I)</label>
      <input
        id="liFullName"
        name="liFullName"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter full name"
      />
    </div>
    <div>
      <label class="block font-medium mb-1" for="liDOB">Date of Birth</label>
      <input
        id="liDOB"
        name="liDOB"
        type="date"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      />
    </div>
    <div>
      <label class="block font-medium mb-1" for="liSex">Sex</label>
      <select
        id="liSex"
        name="liSex"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select sex</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
      </select>
    </div>
    <div>
      <label class="block font-medium mb-1" for="liCivilStatus">Civil Status</label>
      <select
        id="liCivilStatus"
        name="liCivilStatus"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select civil status</option>
        <option>Single</option>
        <option>Married</option>
        <option>Widowed</option>
        <option>Separated</option>
      </select>
    </div>
    <div>
      <label class="block font-medium mb-1" for="liAddress">Address</label>
      <textarea
        id="liAddress"
        name="liAddress"
        required
        rows="3"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter complete address"
      ></textarea>
    </div>
    <div>
      <label class="block font-medium mb-1" for="liContactNumber">Contact Number</label>
      <input
        id="liContactNumber"
        name="liContactNumber"
        type="text"
        inputmode="numeric"
        pattern="^\d{11,15}$"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter contact number (11-15 digits)"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />
      <p id="liContactNumberError" class="text-red-600 text-sm mt-1 hidden">Contact number must be 11 to 15 digits.</p>
    </div>
    <div>
      <label class="block font-medium mb-1" for="liYearsResidency">Years of Residency in Barangay</label>
      <input
        id="liYearsResidency"
        name="liYearsResidency"
        type="number"
        min="0"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter number of years"
      />
    </div>
    <div class="flex justify-end space-x-3 pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="closeForm()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="lowIncomeStep2" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Certificate of Low Income - Financial Information</h2>
    <div>
      <label class="block font-medium mb-1" for="liEmploymentStatus">Employment Status</label>
      <select
        id="liEmploymentStatus"
        name="liEmploymentStatus"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select employment status</option>
        <option>Unemployed</option>
        <option>Part-time</option>
        <option>Seasonal</option>
        <option>Self-employed</option>
        <option>Other</option>
      </select>
    </div>
    <div>
      <label class="block font-medium mb-1" for="liMonthlyIncome">Monthly Income (PHP)</label>
      <input
        id="liMonthlyIncome"
        name="liMonthlyIncome"
        type="number"
        min="0"
        step="100"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter monthly income"
      />
    </div>
    <div>
      <label class="block font-medium mb-1" for="liIncomeSource">Main Source of Income</label>
      <input
        id="liIncomeSource"
        name="liIncomeSource"
        type="text"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter source of income"
      />
    </div>
    <div>
      <label class="block font-medium mb-1" for="liHouseholdMembers">Number of Household Members</label>
      <input
        id="liHouseholdMembers"
        name="liHouseholdMembers"
        type="number"
        min="1"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter number of members"
      />
    </div>
    <div>
      <label class="block font-medium mb-1">Are you the head of household?</label>
      <div class="flex space-x-4">
        <label class="flex items-center">
          <input type="radio" name="liHeadOfHousehold" value="Yes" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]" required>
          <span class="ml-2">Yes</span>
        </label>
        <label class="flex items-center">
          <input type="radio" name="liHeadOfHousehold" value="No" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
          <span class="ml-2">No</span>
        </label>
      </div>
    </div>
    <div>
      <label class="block font-medium mb-1" for="liGovernmentAid">Receiving Government Aid?</label>
      <select
        id="liGovernmentAid"
        name="liGovernmentAid"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select aid program</option>
        <option>4Ps</option>
        <option>Pantawid Pamilya</option>
        <option>Social Pension</option>
        <option>None</option>
        <option>Other</option>
      </select>
    </div>
    <div id="liOtherAidContainer" class="hidden">
      <label class="block font-medium mb-1" for="liOtherAid">Please specify aid program</label>
      <input
        id="liOtherAid"
        name="liOtherAid"
        type="text"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter aid program"
      />
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="lowIncomeGoBackToStep1()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="lowIncomeStep3" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Certificate of Low Income - Purpose of Request</h2>
    <div>
      <label class="block font-medium mb-1" for="liPurpose">Purpose of Certificate</label>
      <select
        id="liPurpose"
        name="liPurpose"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select purpose</option>
        <option>Scholarship Application</option>
        <option>Medical Assistance</option>
        <option>Housing Assistance</option>
        <option>DSWD Assistance</option>
        <option>Other</option>
      </select>
    </div>
    <div id="liOtherPurposeContainer" class="hidden">
      <label class="block font-medium mb-1" for="liOtherPurpose">Please specify</label>
      <input
        id="liOtherPurpose"
        name="liOtherPurpose"
        type="text"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter purpose"
      />
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="lowIncomeGoBackToStep2()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="lowIncomeStep4" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Certificate of Low Income - Declaration</h2>
    <div class="bg-gray-50 p-4 rounded border border-gray-200">
      <label class="flex items-start">
        <input
          type="checkbox"
          name="liDeclaration"
          required
          class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
        >
        <span class="ml-2">
          I hereby declare that the information I have provided is true and correct to the best of my knowledge. 
          I understand that any false information may lead to rejection of my request or legal consequences.
        </span>
      </label>
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="lowIncomeGoBackToStep3()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <div id="lowIncomeStep5" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Certificate of Low Income - Confirm Your Information</h2>
    <div>
      <h3 class="font-medium text-lg mb-2">Personal Information</h3>
      <p><strong>Full Name:</strong> <span id="liConfirmFullName"></span></p>
      <p><strong>Date of Birth:</strong> <span id="liConfirmDOB"></span></p>
      <p><strong>Sex:</strong> <span id="liConfirmSex"></span></p>
      <p><strong>Civil Status:</strong> <span id="liConfirmCivilStatus"></span></p>
      <p><strong>Address:</strong> <span id="liConfirmAddress"></span></p>
      <p><strong>Contact Number:</strong> <span id="liConfirmContactNumber"></span></p>
      <p><strong>Years of Residency:</strong> <span id="liConfirmYearsResidency"></span></p>
      
      <h3 class="font-medium text-lg mt-4 mb-2">Financial Information</h3>
      <p><strong>Employment Status:</strong> <span id="liConfirmEmploymentStatus"></span></p>
      <p><strong>Monthly Income:</strong> <span id="liConfirmMonthlyIncome"></span></p>
      <p><strong>Income Source:</strong> <span id="liConfirmIncomeSource"></span></p>
      <p><strong>Household Members:</strong> <span id="liConfirmHouseholdMembers"></span></p>
      <p><strong>Head of Household:</strong> <span id="liConfirmHeadOfHousehold"></span></p>
      <p><strong>Government Aid:</strong> <span id="liConfirmGovernmentAid"></span></p>
      <p id="liConfirmOtherAid" class="hidden"><strong>Other Aid:</strong> <span></span></p>
      
      <h3 class="font-medium text-lg mt-4 mb-2">Purpose of Request</h3>
      <p><strong>Purpose:</strong> <span id="liConfirmPurpose"></span></p>
      <p id="liConfirmOtherPurpose" class="hidden"><strong>Other Purpose:</strong> <span></span></p>
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="lowIncomeEdit()"
      >
        Edit
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="lowIncomeGoToSend()"
      >
        Confirm
      </button>
    </div>
  </div>
  
  <div id="lowIncomeStep6" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Certificate of Low Income - Send Request</h2>
    <p class="mb-4">Please confirm your request for Certificate of Low Income.</p>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="lowIncomeBackToConfirmation()"
      >
        Cancel
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="lowIncomeSendRequest()"
      >
        Send
      </button>
    </div>
  </div>
  
  <div id="lowIncomeStep7" class="p-6 space-y-4 hidden text-center overflow-y-auto">
    <div class="text-green-600 mb-4">
      <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
    </div>
    <h2 class="text-xl font-semibold mb-4 text-green-600">Request Sent Successfully!</h2>
    <p>Thank you for submitting your application for Certificate of Low Income.</p>
    <p>The Barangay Office will review and process it shortly.</p>
    <button
      type="button"
      class="mt-6 bg-[#800000] text-white rounded px-6 py-2 hover:bg-[#5a0000]"
      onclick="closeForm()"
    >
      Close
    </button>
  </div>
   
  <!-- Unemployment Forms -->
   <form id="unemploymentStep1" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Certificate of Unemployment - Personal Information</h2>
    <div>
      <label class="block font-medium mb-1" for="ueFullName">Full Name (Surname, Name, M.I)</label>
      <input
        id="ueFullName"
        name="ueFullName"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter full name"
      />
    </div>
    <div>
      <label class="block font-medium mb-1" for="ueDOB">Date of Birth</label>
      <input
        id="ueDOB"
        name="ueDOB"
        type="date"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      />
    </div>
    <div>
      <label class="block font-medium mb-1" for="ueSex">Sex</label>
      <select
        id="ueSex"
        name="ueSex"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select sex</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
      </select>
    </div>
    <div>
      <label class="block font-medium mb-1" for="ueCivilStatus">Civil Status</label>
      <select
        id="ueCivilStatus"
        name="ueCivilStatus"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select civil status</option>
        <option>Single</option>
        <option>Married</option>
        <option>Widowed</option>
        <option>Separated</option>
      </select>
    </div>
    <div>
      <label class="block font-medium mb-1" for="ueAddress">Address</label>
      <textarea
        id="ueAddress"
        name="ueAddress"
        required
        rows="3"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter complete address"
      ></textarea>
    </div>
    <div>
      <label class="block font-medium mb-1" for="ueContactNumber">Contact Number</label>
      <input
        id="ueContactNumber"
        name="ueContactNumber"
        type="text"
        inputmode="numeric"
        pattern="^\d{11,15}$"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter contact number (11-15 digits)"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />
      <p id="ueContactNumberError" class="text-red-600 text-sm mt-1 hidden">Contact number must be 11 to 15 digits.</p>
    </div>
    <div>
      <label class="block font-medium mb-1" for="ueYearsResidency">Years of Residency in Barangay</label>
      <input
        id="ueYearsResidency"
        name="ueYearsResidency"
        type="number"
        min="0"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter number of years"
      />
    </div>
    <div class="flex justify-end space-x-3 pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="closeForm()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="unemploymentStep2" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Certificate of Unemployment - Employment History</h2>
    <div>
      <label class="block font-medium mb-1">Are you currently employed?</label>
      <div class="flex space-x-4">
        <label class="flex items-center">
          <input type="radio" name="ueCurrentlyEmployed" value="Yes" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]" required>
          <span class="ml-2">Yes</span>
        </label>
        <label class="flex items-center">
          <input type="radio" name="ueCurrentlyEmployed" value="No" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
          <span class="ml-2">No</span>
        </label>
      </div>
    </div>
    <div id="ueEmploymentHistoryContainer">
      <div class="mt-4">
        <label class="block font-medium mb-1" for="ueLastEmployer">Last Employer Name</label>
        <input
          id="ueLastEmployer"
          name="ueLastEmployer"
          type="text"
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
          placeholder="Enter employer name"
        />
      </div>
      <div class="mt-4">
        <label class="block font-medium mb-1" for="ueJobTitle">Position/Job Title</label>
        <input
          id="ueJobTitle"
          name="ueJobTitle"
          type="text"
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
          placeholder="Enter your position"
        />
      </div>
      <div class="mt-4">
        <label class="block font-medium mb-1" for="ueLastDate">Last Date of Employment</label>
        <input
          id="ueLastDate"
          name="ueLastDate"
          type="date"
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        />
      </div>
      <div class="mt-4">
        <label class="block font-medium mb-1" for="ueReason">Reason for Unemployment</label>
        <select
          id="ueReason"
          name="ueReason"
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        >
          <option value="" disabled selected>Select reason</option>
          <option>End of Contract</option>
          <option>Company Closure</option>
          <option>Resigned</option>
          <option>Laid Off</option>
          <option>COVID-19 Impact</option>
          <option>Other</option>
        </select>
      </div>
      <div id="ueOtherReasonContainer" class="mt-4 hidden">
        <label class="block font-medium mb-1" for="ueOtherReason">Please specify</label>
        <input
          id="ueOtherReason"
          name="ueOtherReason"
          type="text"
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
          placeholder="Enter reason"
        />
      </div>
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="unemploymentGoBackToStep1()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="unemploymentStep3" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Certificate of Unemployment - Purpose of Request</h2>
    <div>
      <label class="block font-medium mb-1" for="uePurpose">Purpose of Certificate</label>
      <select
        id="uePurpose"
        name="uePurpose"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select purpose</option>
        <option>Job Application</option>
        <option>Financial Assistance</option>
        <option>Government Aid (e.g. DSWD, DOLE)</option>
        <option>Scholarship</option>
        <option>Other</option>
      </select>
    </div>
    <div id="ueOtherPurposeContainer" class="hidden">
      <label class="block font-medium mb-1" for="ueOtherPurpose">Please specify</label>
      <input
        id="ueOtherPurpose"
        name="ueOtherPurpose"
        type="text"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter purpose"
      />
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="unemploymentGoBackToStep2()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="unemploymentStep4" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Certificate of Unemployment - Declaration</h2>
    <div class="bg-gray-50 p-4 rounded border border-gray-200">
      <label class="flex items-start">
        <input
          type="checkbox"
          name="ueDeclaration"
          required
          class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
        >
        <span class="ml-2">
          I hereby declare that the information I have provided is true and correct to the best of my knowledge. 
          I understand that any false information may lead to rejection of my request or legal consequences.
        </span>
      </label>
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="unemploymentGoBackToStep3()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <div id="unemploymentStep5" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Certificate of Unemployment - Confirm Your Information</h2>
    <div>
      <h3 class="font-medium text-lg mb-2">Personal Information</h3>
      <p><strong>Full Name:</strong> <span id="ueConfirmFullName"></span></p>
      <p><strong>Date of Birth:</strong> <span id="ueConfirmDOB"></span></p>
      <p><strong>Sex:</strong> <span id="ueConfirmSex"></span></p>
      <p><strong>Civil Status:</strong> <span id="ueConfirmCivilStatus"></span></p>
      <p><strong>Address:</strong> <span id="ueConfirmAddress"></span></p>
      <p><strong>Contact Number:</strong> <span id="ueConfirmContactNumber"></span></p>
      <p><strong>Years of Residency:</strong> <span id="ueConfirmYearsResidency"></span></p>
      
      <h3 class="font-medium text-lg mt-4 mb-2">Employment History</h3>
      <p><strong>Currently Employed:</strong> <span id="ueConfirmCurrentlyEmployed"></span></p>
      <div id="ueConfirmEmploymentDetails">
        <p><strong>Last Employer:</strong> <span id="ueConfirmLastEmployer"></span></p>
        <p><strong>Job Title:</strong> <span id="ueConfirmJobTitle"></span></p>
        <p><strong>Last Date of Employment:</strong> <span id="ueConfirmLastDate"></span></p>
        <p><strong>Reason for Unemployment:</strong> <span id="ueConfirmReason"></span></p>
        <p id="ueConfirmOtherReason" class="hidden"><strong>Other Reason:</strong> <span></span></p>
      </div>
      
      <h3 class="font-medium text-lg mt-4 mb-2">Purpose of Request</h3>
      <p><strong>Purpose:</strong> <span id="ueConfirmPurpose"></span></p>
      <p id="ueConfirmOtherPurpose" class="hidden"><strong>Other Purpose:</strong> <span></span></p>
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="unemploymentEdit()"
      >
        Edit
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="unemploymentGoToSend()"
      >
        Confirm
      </button>
    </div>
  </div>
  
  <div id="unemploymentStep6" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Certificate of Unemployment - Send Request</h2>
    <p class="mb-4">Please confirm your request for Certificate of Unemployment.</p>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="unemploymentBackToConfirmation()"
      >
        Cancel
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="unemploymentSendRequest()"
      >
        Send
      </button>
    </div>
  </div>
  
  <div id="unemploymentStep7" class="p-6 space-y-4 hidden text-center overflow-y-auto">
    <div class="text-green-600 mb-4">
      <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
    </div>
    <h2 class="text-xl font-semibold mb-4 text-green-600">Request Sent Successfully!</h2>
    <p>Thank you for submitting your application for a Certificate of Unemployment.</p>
    <p>The Barangay Office will review and process it shortly.</p>
    <button
      type="button"
      class="mt-6 bg-[#800000] text-white rounded px-6 py-2 hover:bg-[#5a0000]"
      onclick="closeForm()"
    >
      Close
    </button>
  </div>

   <!--Solo Parent Certificate Forms-->
   <form id="soloParentStep1" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Solo Parent Certificate - Personal Information</h2>
    
    <!-- Important Note -->
    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <p class="text-sm text-yellow-700">
            <strong>Important:</strong> You will need to present <b><i>any of the following</i></b> supporting documents to process this certificate.
            <br> <b>*For deceased spouse:</b> PSA Death Certificate. 
            <br> <b>*For incapacitated spouse:</b> Medical certificate. 
            <br> <b>*For separated spouse:</b> Legal declaration or PSA CENOMAR. 
            <br> *Children's birth certificates may also be required.
          </p>
        </div>
      </div>
    </div>
  
    <div>
      <label class="block font-medium mb-1" for="spFullName">Full Name (Surname, Name, M.I)</label>
      <input
        id="spFullName"
        name="spFullName"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter full name"
      />
    </div>
    <div>
      <label class="block font-medium mb-1" for="spDOB">Date of Birth</label>
      <input
        id="spDOB"
        name="spDOB"
        type="date"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      />
    </div>
    <div>
      <label class="block font-medium mb-1" for="spSex">Sex</label>
      <select
        id="spSex"
        name="spSex"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select sex</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
      </select>
    </div>
    <div>
      <label class="block font-medium mb-1" for="spCivilStatus">Civil Status</label>
      <select
        id="spCivilStatus"
        name="spCivilStatus"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select civil status</option>
        <option>Single</option>
        <option>Married</option>
        <option>Widowed</option>
        <option>Separated</option>
      </select>
    </div>
    <div>
      <label class="block font-medium mb-1" for="spAddress">Address</label>
      <textarea
        id="spAddress"
        name="spAddress"
        required
        rows="3"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter complete address"
      ></textarea>
    </div>
    <div>
      <label class="block font-medium mb-1" for="spContactNumber">Contact Number</label>
      <input
        id="spContactNumber"
        name="spContactNumber"
        type="text"
        inputmode="numeric"
        pattern="^\d{11,15}$"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter contact number (11-15 digits)"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />
      <p id="spContactNumberError" class="text-red-600 text-sm mt-1 hidden">Contact number must be 11 to 15 digits.</p>
    </div>
    <div class="flex justify-end space-x-3 pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="closeForm()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="soloParentStep2" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Solo Parent Certificate - Status Information</h2>
    <div>
      <label class="block font-medium mb-1">Reason for Being a Solo Parent</label>
      <div class="space-y-2">
        <label class="flex items-center">
          <input type="radio" name="spReason" value="Single Parent by Choice" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]" required>
          <span class="ml-2">Single Parent by Choice</span>
        </label>
        <label class="flex items-center">
          <input type="radio" name="spReason" value="Separated" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
          <span class="ml-2">Separated</span>
        </label>
        <label class="flex items-center">
          <input type="radio" name="spReason" value="Widowed" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
          <span class="ml-2">Widowed</span>
        </label>
        <label class="flex items-center">
          <input type="radio" name="spReason" value="Spouse Detained/Imprisoned" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
          <span class="ml-2">Spouse Detained/Imprisoned</span>
        </label>
        <label class="flex items-center">
          <input type="radio" name="spReason" value="Spouse Incapacitated" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
          <span class="ml-2">Spouse Incapacitated</span>
        </label>
        <label class="flex items-center">
          <input type="radio" name="spReason" value="Spouse Abandoned" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
          <span class="ml-2">Spouse Abandoned</span>
        </label>
        <label class="flex items-center">
          <input type="radio" name="spReason" value="Other" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
          <span class="ml-2">Other</span>
        </label>
      </div>
    </div>
    <div id="spOtherReasonContainer" class="hidden">
      <label class="block font-medium mb-1" for="spOtherReason">Please specify</label>
      <input
        id="spOtherReason"
        name="spOtherReason"
        type="text"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter reason"
      />
    </div>
    <div>
      <label class="block font-medium mb-1" for="spDuration">How long have you been a solo parent?</label>
      <div class="flex">
        <input
          id="spDuration"
          name="spDuration"
          type="number"
          min="0"
          required
          class="w-24 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
          placeholder="0"
        />
        <select
          name="spDurationUnit"
          required
          class="ml-2 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        >
          <option value="years">Years</option>
          <option value="months">Months</option>
        </select>
      </div>
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="soloParentGoBackToStep1()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="soloParentStep3" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Solo Parent Certificate - Dependent Details</h2>
    <div id="dependentsContainer">
      <!-- First child will be added here by default -->
      <div class="dependent-form border-b border-gray-200 pb-4 mb-4">
        <div class="flex justify-between items-center mb-2">
          <h3 class="font-medium">Child #1</h3>
          <button type="button" onclick="removeDependent(this)" class="text-red-600 text-sm">Remove</button>
        </div>
        <div class="space-y-4">
          <div>
            <label class="block font-medium mb-1" for="spChildName1">Full Name of Child (Surname, Name, M.I)</label>
            <input
              id="spChildName1"
              name="spChildName[]"
              type="text"
              required
              class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
              placeholder="Enter child's full name"
            />
          </div>
          <div>
            <label class="block font-medium mb-1" for="spChildDOB1">Date of Birth</label>
            <input
              id="spChildDOB1"
              name="spChildDOB[]"
              type="date"
              required
              class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
              onchange="calculateAge(this)"
            />
          </div>
          <div>
            <label class="block font-medium mb-1" for="spChildAge1">Age</label>
            <input
              id="spChildAge1"
              name="spChildAge[]"
              type="text"
              readonly
              class="w-full border border-gray-300 rounded px-3 py-2 bg-gray-100"
            />
          </div>
          <div>
            <label class="block font-medium mb-1" for="spChildRelationship1">Relationship</label>
            <select
              id="spChildRelationship1"
              name="spChildRelationship[]"
              required
              class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
            >
              <option value="" disabled selected>Select relationship</option>
              <option>Son</option>
              <option>Daughter</option>
              <option>Stepchild</option>
              <option>Adopted Child</option>
              <option>Foster Child</option>
            </select>
          </div>
          <div>
            <label class="block font-medium mb-1">Living With You?</label>
            <div class="flex space-x-4">
              <label class="flex items-center">
                <input type="radio" name="spChildLivingWithYou1" value="Yes" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]" required>
                <span class="ml-2">Yes</span>
              </label>
              <label class="flex items-center">
                <input type="radio" name="spChildLivingWithYou1" value="No" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
                <span class="ml-2">No</span>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>
    <button
      type="button"
      onclick="addDependent()"
      class="mt-2 flex items-center text-[#f94e4e] hover:text-[#d43c3c]"
    >
      <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
      </svg>
      Add Another Child
    </button>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="soloParentGoBackToStep2()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <form id="soloParentStep4" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Solo Parent Certificate - Purpose of Request</h2>
    <div>
      <label class="block font-medium mb-1" for="spPurpose">Purpose of Certificate</label>
      <select
        id="spPurpose"
        name="spPurpose"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select purpose</option>
        <option>Government Assistance</option>
        <option>Scholarship</option>
        <option>Employment</option>
        <option>Medical Benefits</option>
        <option>Other</option>
      </select>
    </div>
    <div id="spOtherPurposeContainer" class="hidden">
      <label class="block font-medium mb-1" for="spOtherPurpose">Please specify</label>
      <input
        id="spOtherPurpose"
        name="spOtherPurpose"
        type="text"
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter purpose"
      />
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="soloParentGoBackToStep3()"
      >
        Back
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  
  <div id="soloParentStep5" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Solo Parent Certificate - Confirm Your Information</h2>
    <div>
      <h3 class="font-medium text-lg mb-2">Personal Information</h3>
      <p><strong>Full Name:</strong> <span id="spConfirmFullName"></span></p>
      <p><strong>Date of Birth:</strong> <span id="spConfirmDOB"></span></p>
      <p><strong>Sex:</strong> <span id="spConfirmSex"></span></p>
      <p><strong>Civil Status:</strong> <span id="spConfirmCivilStatus"></span></p>
      <p><strong>Address:</strong> <span id="spConfirmAddress"></span></p>
      <p><strong>Contact Number:</strong> <span id="spConfirmContactNumber"></span></p>
      
      <h3 class="font-medium text-lg mt-4 mb-2">Solo Parent Status</h3>
      <p><strong>Reason:</strong> <span id="spConfirmReason"></span></p>
      <p id="spConfirmOtherReason" class="hidden"><strong>Other Reason:</strong> <span></span></p>
      <p><strong>Duration:</strong> <span id="spConfirmDuration"></span></p>
      
      <h3 class="font-medium text-lg mt-4 mb-2">Dependent Details</h3>
      <div id="spConfirmDependents"></div>
      
      <h3 class="font-medium text-lg mt-4 mb-2">Purpose of Request</h3>
      <p><strong>Purpose:</strong> <span id="spConfirmPurpose"></span></p>
      <p id="spConfirmOtherPurpose" class="hidden"><strong>Other Purpose:</strong> <span></span></p>
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="soloParentEdit()"
      >
        Edit
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="soloParentGoToSend()"
      >
        Confirm
      </button>
    </div>
  </div>
  
  <div id="soloParentStep6" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Solo Parent Certificate - Send Request</h2>
    <p class="mb-4">Please confirm your request for Solo Parent Certificate.</p>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="soloParentBackToConfirmation()"
      >
        Cancel
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="soloParentSendRequest()"
      >
        Send
      </button>
    </div>
  </div>
  
  <div id="soloParentStep7" class="p-6 space-y-4 hidden text-center overflow-y-auto">
    <div class="text-green-600 mb-4">
      <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
    </div>
    <h2 class="text-xl font-semibold mb-4 text-green-600">Request Sent Successfully!</h2>
    <p>Thank you for submitting your application for Solo Parent Certification.</p>
    <p>The Barangay Office will review and process it shortly.</p>
    <button
      type="button"
      class="mt-6 bg-[#800000] text-white rounded px-6 py-2 hover:bg-[#5a0000]"
      onclick="closeForm()"
    >
      Close
    </button>
  </div>

  <!-- Certificate of Good Moral -->
   <form id="goodMoralStep1" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
    <h2 class="text-xl font-semibold mb-4">Certificate of Good Moral Character - Personal Information</h2>
    <div>
      <label class="block font-medium mb-1" for="gmFullName">Full Name (Surname, Name, M.I)</label>
      <input
        id="gmFullName"
        name="gmFullName"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter full name"
      />
    </div>
    <div>
      <label class="block font-medium mb-1" for="gmAddress">Address</label>
      <input
        id="gmAddress"
        name="gmAddress"
        type="text"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder="Enter address"
      />
    </div>
    <div>
      <label class="block font-medium mb-1" for="gmCivilStatus">Civil Status</label>
      <select
        id="gmCivilStatus"
        name="gmCivilStatus"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select civil status</option>
        <option>Single</option>
        <option>Married</option>
        <option>Widowed</option>
        <option>Separated</option>
        <option>Divorced</option>
      </select>
    </div>
    <div>
      <label class="block font-medium mb-1" for="gmLengthResidency">Length of Residency</label>
      <input
        id="gmLengthResidency"
        name="gmLengthResidency"
        type="text"
        pattern="^\d+\s(years?|months?)$"
        title='Example: "5 years" or "10 months"'
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        placeholder='Example: "5 years" or "10 months"'
      />
    </div>
    <div>
      <label class="block font-medium mb-1" for="gmPurpose">Purpose of Request</label>
      <select
        id="gmPurpose"
        name="gmPurpose"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
      >
        <option value="" disabled selected>Select purpose</option>
        <option>School Admission</option>
        <option>Scholarship</option>
        <option>Employment</option>
        <option>Other</option>
      </select>
    </div>
    <div class="flex justify-end space-x-3 pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="closeForm()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  <!-- Add this after goodMoralStep1 and before goodMoralStep2 -->
<form id="goodMoralStep1b" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
  <h2 class="text-xl font-semibold mb-4">Good Moral Character - Declaration</h2>
  <div class="bg-gray-50 p-4 rounded border border-gray-200">
    <label class="flex items-start">
      <input
        type="checkbox"
        name="gmDeclaration"
        required
        class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
      >
      <span class="ml-2">
        I hereby declare that the information I have provided is true and correct to the best of my knowledge. 
        I understand that any false information may lead to rejection of my request or legal consequences.
      </span>
    </label>
  </div>
  <div class="flex justify-between pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="goodMoralGoBackToStep1()"
    >
      Back
    </button>
    <button
      type="submit"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
    >
      Next
    </button>
  </div>
</form>
  <!--Good Moral Step 2-->
  <div id="goodMoralStep2" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Certificate of Good Moral Character - Confirm Your Information</h2>
    <div>
      <p><strong>Full Name:</strong> <span id="gmConfirmFullName"></span></p>
      <p><strong>Address:</strong> <span id="gmConfirmAddress"></span></p>
      <p><strong>Civil Status:</strong> <span id="gmConfirmCivilStatus"></span></p>
      <p><strong>Length of Residency:</strong> <span id="gmConfirmLengthResidency"></span></p>
      <p><strong>Purpose of Request:</strong> <span id="gmConfirmPurpose"></span></p>
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="goodMoralGoBackToStep1()"
      >
        Back
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="goodMoralGoToSend()"
      >
        Confirm
      </button>
    </div>
  </div>
  
  <div id="goodMoralStep3" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Certificate of Good Moral Character - Send Request</h2>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="goodMoralBackToConfirmation()"
      >
        Cancel
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="goodMoralSendRequest()"
      >
        Send
      </button>
    </div>
  </div>
  
  <div id="goodMoralStep4" class="p-6 space-y-4 hidden text-center overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4 text-green-600">Request Sent!</h2>
    <p>Thank you for your request. The barangay admin will process it shortly.</p>
    <button
      type="button"
      class="mt-6 bg-[#800000] text-white rounded px-6 py-2 hover:bg-[#5a0000]"
      onclick="closeForm()"
    >
      Close
    </button>
  </div>

   <!-- Barangay Clearance Forms -->
   <form id="clearanceStep1" class="p-8 space-y-7 hidden flex flex-col overflow-hidden">
     <h2 class="text-xl font-semibold mb-4">Barangay Clearance - Personal Information</h2>
     <div class="overflow-y-auto flex-grow pr-4 space-y-5 max-h-[90vh]">
       <div>
         <label class="block font-medium mb-1" for="clFullName">Full Name (Surname, Name, M.I)</label>
         <input
           id="clFullName"
           name="clFullName"
           type="text"
           required
           class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
           placeholder="Enter full name"
         />
       </div>
       <div>
         <label class="block font-medium mb-1" for="clDOB">Date of Birth</label>
         <input
           id="clDOB"
           name="clDOB"
           type="date"
           required
           class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
         />
       </div>
       <div>
         <label class="block font-medium mb-1" for="clPOB">Place of Birth</label>
         <input
           id="clPOB"
           name="clPOB"
           type="text"
           required
           class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
           placeholder="Enter place of birth"
         />
       </div>
       <div>
         <label class="block font-medium mb-1" for="clGender">Gender</label>
         <select
           id="clGender"
           name="clGender"
           required
           class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
         >
           <option value="" disabled selected>Select gender</option>
           <option>Male</option>
           <option>Female</option>
           <option>Other</option>
         </select>
       </div>
       <div>
         <label class="block font-medium mb-1" for="clCivilStatus">Civil Status</label>
         <select
           id="clCivilStatus"
           name="clCivilStatus"
           required
           class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
         >
           <option value="" disabled selected>Select civil status</option>
           <option>Single</option>
           <option>Married</option>
           <option>Widowed</option>
           <option>Separated</option>
           <option>Divorced</option>
         </select>
       </div>
       <div>
         <label class="block font-medium mb-1" for="clCitizenship">Citizenship</label>
         <input
           id="clCitizenship"
           name="clCitizenship"
           type="text"
           required
           class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
           placeholder="Enter citizenship"
         />
       </div>
       <div>
         <label class="block font-medium mb-1" for="clAddress">Address</label>
         <input
           id="clAddress"
           name="clAddress"
           type="text"
           required
           class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
           placeholder="Enter address"
         />
       </div>
       <div>
         <label class="block font-medium mb-1" for="clYearsResidency">Years of Residency</label>
         <input
           id="clYearsResidency"
           name="clYearsResidency"
           type="number"
           min="0"
           required
           class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
           placeholder="Enter years of residency"
         />
       </div>
       <div>
         <label class="block font-medium mb-1" for="clPurpose">Purpose of Clearance</label>
         <select
           id="clPurpose"
           name="clPurpose"
           required
           class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
         >
           <option value="" disabled selected>Select purpose</option>
           <option>Job Application</option>
           <option>Business Permit</option>
           <option>Study</option>
           <option>Vehicle</option>
           <option>Travel</option>
           <option>Other</option>
         </select>
       </div>
     </div>
     <div class="flex justify-end space-x-3 pt-4">
       <button
         type="button"
         class="bg-gray-300 text-gray-700 rounded px-4 py-2"
         onclick="closeForm()"
       >
         Cancel
       </button>
       <button
         type="submit"
         class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
       >
         Next
       </button>
     </div>
   </form>

   <!-- Add this after clearanceStep1 and before clearanceStep2 -->
<form id="clearanceStep1b" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
  <h2 class="text-xl font-semibold mb-4">Barangay Clearance - Declaration</h2>
  <div class="bg-gray-50 p-4 rounded border border-gray-200">
    <label class="flex items-start">
      <input
        type="checkbox"
        name="clDeclaration"
        required
        class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
      >
      <span class="ml-2">
        I hereby declare that the information I have provided is true and correct to the best of my knowledge. 
        I understand that any false information may lead to rejection of my request or legal consequences.
      </span>
    </label>
  </div>
  <div class="flex justify-between pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="clearanceGoBackToStep1()"
    >
      Back
    </button>
    <button
      type="submit"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
    >
      Next
    </button>
  </div>
</form>

<!-- Barangay Clearance Step 2 -->
   <div id="clearanceStep2" class="p-6 space-y-4 hidden overflow-y-auto">
     <h2 class="text-xl font-semibold mb-4">Barangay Clearance - Confirm Your Information</h2>
     <div>
       <p><strong>Full Name:</strong> <span id="clConfirmFullName"></span></p>
       <p><strong>Date of Birth:</strong> <span id="clConfirmDOB"></span></p>
       <p><strong>Place of Birth:</strong> <span id="clConfirmPOB"></span></p>
       <p><strong>Gender:</strong> <span id="clConfirmGender"></span></p>
       <p><strong>Civil Status:</strong> <span id="clConfirmCivilStatus"></span></p>
       <p><strong>Citizenship:</strong> <span id="clConfirmCitizenship"></span></p>
       <p><strong>Address:</strong> <span id="clConfirmAddress"></span></p>
       <p><strong>Years of Residency:</strong> <span id="clConfirmYearsResidency"></span></p>
       <p><strong>Purpose of Clearance:</strong> <span id="clConfirmPurpose"></span></p>
     </div>
     <div class="flex justify-between pt-4">
       <button
         type="button"
         class="bg-gray-300 text-gray-700 rounded px-4 py-2"
         onclick="clearanceGoBackToStep1()"
       >
         Back
       </button>
       <button
         type="button"
         class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
         onclick="clearanceGoToSend()"
       >
         Confirm
       </button>
     </div>
   </div>

   <div id="clearanceStep3" class="p-6 space-y-4 hidden overflow-y-auto">
     <h2 class="text-xl font-semibold mb-4">Barangay Clearance - Send Request</h2>
     <div class="flex justify-between pt-4">
       <button
         type="button"
         class="bg-gray-300 text-gray-700 rounded px-4 py-2"
         onclick="clearanceBackToConfirmation()"
       >
         Cancel
       </button>
       <button
         type="button"
         class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
         onclick="clearanceSendRequest()"
       >
         Send
       </button>
     </div>
   </div>

   <div id="clearanceStep4" class="p-6 space-y-4 hidden text-center overflow-y-auto">
     <h2 class="text-xl font-semibold mb-4 text-green-600">Request Sent!</h2>
     <p>Thank you for your request. The barangay admin will process it shortly.</p>
     <button
       type="button"
       class="mt-6 bg-[#800000] text-white rounded px-6 py-2 hover:bg-[#5a0000]"
       onclick="closeForm()"
     >
       Close
     </button>
   </div>

   <!-- Barangay Indigency Forms -->
   <form id="indigencyStep1" class="p-8 space-y-7 hidden flex flex-col overflow-hidden" novalidate>
    <h2 class="text-xl font-semibold mb-4">Certificate of Indigency - Personal Information</h2>
    <div class="overflow-y-auto flex-grow pr-4 space-y-5 max-h-[90vh]">
      <div>
        <label class="block font-medium mb-1" for="indFullName">Full Name (Surname, Name, M.I)</label>
        <input
          id="indFullName"
          name="indFullName"
          type="text"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
          placeholder="Enter full name"
        />
      </div>
      <div>
        <label class="block font-medium mb-1" for="indDOB">Date of Birth</label>
        <input
          id="indDOB"
          name="indDOB"
          type="date"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        />
      </div>
      <div>
        <label class="block font-medium mb-1" for="indAddress">Address</label>
        <input
          id="indAddress"
          name="indAddress"
          type="text"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
          placeholder="Enter address"
        />
      </div>
      <div>
        <label class="block font-medium mb-1" for="indReason">Reason for Request</label>
        <select
          id="indReason"
          name="indReason"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        >
          <option value="" disabled selected>Select reason</option>
          <option>Scholarship</option>
          <option>Hospital Assistance</option>
          <option>Legal Aid</option>
          <option>Other</option>
        </select>
      </div>
      <div>
        <label class="block font-medium mb-1" for="indIncome">Monthly Income (optional)</label>
        <input
          id="indIncome"
          name="indIncome"
          type="text"
          inputmode="numeric"
          pattern="[0-9]*"
          placeholder='Enter monthly income or "No Income"'
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
          oninput="this.value = this.value.replace(/[^0-9]/g, '')"
        />
      </div>
    </div>
    <div class="flex justify-end space-x-3 pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="closeForm()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>

  <!-- Add this after indigencyStep1 and before indigencyStep2 -->
<form id="indigencyStep1b" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
  <h2 class="text-xl font-semibold mb-4">Certificate of Indigency - Declaration</h2>
  <div class="bg-gray-50 p-4 rounded border border-gray-200">
    <label class="flex items-start">
      <input
        type="checkbox"
        name="indDeclaration"
        required
        class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
      >
      <span class="ml-2">
        I hereby declare that the information I have provided is true and correct to the best of my knowledge. 
        I understand that any false information may lead to rejection of my request or legal consequences.
      </span>
    </label>
  </div>
  <div class="flex justify-between pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="indigencyGoBackToStep1()"
    >
      Back
    </button>
    <button
      type="submit"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
    >
      Next
    </button>
  </div>
</form>

<!--Indigency Step2-->
  <div id="indigencyStep2" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Certificate of Indigency - Confirm Your Information</h2>
    <div>
      <p><strong>Full Name:</strong> <span id="indConfirmFullName"></span></p>
      <p><strong>Date of Birth:</strong> <span id="indConfirmDOB"></span></p>
      <p><strong>Address:</strong> <span id="indConfirmAddress"></span></p>
      <p><strong>Reason for Request:</strong> <span id="indConfirmReason"></span></p>
      <p><strong>Monthly Income:</strong> <span id="indConfirmIncome"></span></p>
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="indigencyGoBackToStep1()"
      >
        Back
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="indigencyGoToSend()"
      >
        Confirm
      </button>
    </div>
  </div>

  <div id="indigencyStep3" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Certificate of Indigency - Send Request</h2>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="indigencyBackToConfirmation()"
      >
        Cancel
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="indigencySendRequest()"
      >
        Send
      </button>
    </div>
  </div>

  <div id="indigencyStep4" class="p-6 space-y-4 hidden text-center overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4 text-green-600">Request Sent!</h2>
    <p>Thank you for your request. The barangay admin will process it shortly.</p>
    <button
      type="button"
      class="mt-6 bg-[#800000] text-white rounded px-6 py-2 hover:bg-[#5a0000]"
      onclick="closeForm()"
    >
      Close
    </button>
  </div>

  <!-- Barangay Residency Forms -->
  <form id="residencyStep1" class="p-8 space-y-7 hidden flex flex-col overflow-hidden" novalidate>
    <h2 class="text-xl font-semibold mb-4">Barangay Residency Certificate - Personal Information</h2>
    <div class="overflow-y-auto flex-grow pr-4 space-y-5 max-h-[90vh]">
      <div>
        <label class="block font-medium mb-1" for="resFullName">Full Name (Surname, Name, M.I)</label>
        <input
          id="resFullName"
          name="resFullName"
          type="text"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
          placeholder="Enter full name"
        />
      </div>
      <div>
        <label class="block font-medium mb-1" for="resDOB">Date of Birth</label>
        <input
          id="resDOB"
          name="resDOB"
          type="date"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        />
      </div>
      <div>
        <label class="block font-medium mb-1" for="resAddress">Address</label>
        <input
          id="resAddress"
          name="resAddress"
          type="text"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
          placeholder="Enter address"
        />
      </div>
      <div>
        <label class="block font-medium mb-1" for="resLengthStay">Length of Stay</label>
        <input
          id="resLengthStay"
          name="resLengthStay"
          type="text"
          pattern="^\d+\s(years?|months?)$"
          title='Example: "5 years" or "10 months"'
          required
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
          placeholder='Example: "5 years" or "10 months"'
        />
      </div>
      <div>
        <label class="block font-medium mb-1" for="resPurpose">Purpose of Request</label>
        <select
          id="resPurpose"
          name="resPurpose"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        >
          <option value="" disabled selected>Select purpose</option>
          <option>Job</option>
          <option>School</option>
          <option>Legal</option>
          <option>Other</option>
        </select>
      </div>
    </div>
    <div class="flex justify-end space-x-3 pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="closeForm()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
      >
        Next
      </button>
    </div>
  </form>
  <!-- Add this after residencyStep1 and before residencyStep2 -->
<form id="residencyStep1b" class="p-6 space-y-4 hidden overflow-y-auto" novalidate>
  <h2 class="text-xl font-semibold mb-4">Barangay Residency - Declaration</h2>
  <div class="bg-gray-50 p-4 rounded border border-gray-200">
    <label class="flex items-start">
      <input
        type="checkbox"
        name="resDeclaration"
        required
        class="mt-1 form-checkbox h-5 w-5 text-[#f94e4e] focus:ring-[#f94e4e]"
      >
      <span class="ml-2">
        I hereby declare that the information I have provided is true and correct to the best of my knowledge. 
        I understand that any false information may lead to rejection of my request or legal consequences.
      </span>
    </label>
  </div>
  <div class="flex justify-between pt-4">
    <button
      type="button"
      class="bg-gray-300 text-gray-700 rounded px-4 py-2"
      onclick="residencyGoBackToStep1()"
    >
      Back
    </button>
    <button
      type="submit"
      class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
    >
      Next
    </button>
  </div>
</form>
<!-- Barangay Residency Step2-->
  <div id="residencyStep2" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Barangay Residency Certificate - Confirm Your Information</h2>
    <div>
      <p><strong>Full Name:</strong> <span id="resConfirmFullName"></span></p>
      <p><strong>Date of Birth:</strong> <span id="resConfirmDOB"></span></p>
      <p><strong>Address:</strong> <span id="resConfirmAddress"></span></p>
      <p><strong>Length of Stay:</strong> <span id="resConfirmLengthStay"></span></p>
      <p><strong>Purpose of Request:</strong> <span id="resConfirmPurpose"></span></p>
    </div>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="residencyGoBackToStep1()"
      >
        Back
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="residencyGoToSend()"
      >
        Confirm
      </button>
    </div>
  </div>

  <div id="residencyStep3" class="p-6 space-y-4 hidden overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Barangay Residency Certificate - Send Request</h2>
    <div class="flex justify-between pt-4">
      <button
        type="button"
        class="bg-gray-300 text-gray-700 rounded px-4 py-2"
        onclick="residencyBackToConfirmation()"
      >
        Cancel
      </button>
      <button
        type="button"
        class="bg-[#f94e4e] text-white rounded px-4 py-2 hover:bg-[#d43c3c]"
        onclick="residencySendRequest()"
      >
        Send
      </button>
    </div>
  </div>

  <div id="residencyStep4" class="p-6 space-y-4 hidden text-center overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4 text-green-600">Request Sent!</h2>
    <p>Thank you for your request. The barangay admin will process it shortly.</p>
    <button
      type="button"
      class="mt-6 bg-[#800000] text-white rounded px-6 py-2 hover:bg-[#5a0000]"
      onclick="closeForm()"
    >
      Close
    </button>
  </div>
 </div>
</div>

<script>
 const splashScreen = document.getElementById("splashScreen");
 const mainScreen = document.getElementById("mainScreen");
 const formModal = document.getElementById("formModal");

 // Buttons for dropdown toggles
 const certificatesBtn = document.getElementById("certificatesBtn");
 const permitBtn = document.getElementById("permitBtn");

 // Dropdown menus
 const certificatesDropdown = document.getElementById("certificatesDropdown");
 const permitDropdown = document.getElementById("permitDropdown");

 // Splash screen tap or hover to proceed
 splashScreen.addEventListener("click", () => {
   splashScreen.classList.add("hidden");
   mainScreen.classList.remove("hidden");
 });

 // Close form modal and reset all steps/forms
 function closeForm() {
   formModal.classList.add("hidden");
   resetAllForms();
   hideAllSteps();
 }

 // Reset all forms
function resetAllForms() {
  // Barangay ID forms
  const bIDStep1 = document.getElementById("barangayIDStep1");
  const bIDStep2 = document.getElementById("barangayIDStep2");
  const bIDStep2b = document.getElementById("barangayIDStep2b");
  if (bIDStep1) bIDStep1.reset();
  if (bIDStep2) bIDStep2.reset();
  if (bIDStep2b) bIDStep2b.reset();
  
  // Barangay Clearance forms
  const clrStep1 = document.getElementById("clearanceStep1");
  const clrStep1b = document.getElementById("clearanceStep1b");
  if (clrStep1) clrStep1.reset();
  if (clrStep1b) clrStep1b.reset();
  
  // Barangay Indigency forms
  const indStep1 = document.getElementById("indigencyStep1");
  const indStep1b = document.getElementById("indigencyStep1b");
  if (indStep1) indStep1.reset();
  if (indStep1b) indStep1b.reset();
  
  // Barangay Residency forms
  const resStep1 = document.getElementById("residencyStep1");
  const resStep1b = document.getElementById("residencyStep1b");
  if (resStep1) resStep1.reset();
  if (resStep1b) resStep1b.reset();
  
  // Good Moral Character forms
  const gmStep1 = document.getElementById("goodMoralStep1");
  const gmStep1b = document.getElementById("goodMoralStep1b");
  if (gmStep1) gmStep1.reset();
  if (gmStep1b) gmStep1b.reset();
  
  // Solo Parent forms
  const spStep1 = document.getElementById("soloParentStep1");
  const spStep2 = document.getElementById("soloParentStep2");
  const spStep3 = document.getElementById("soloParentStep3");
  const spStep4 = document.getElementById("soloParentStep4");
  if (spStep1) spStep1.reset();
  if (spStep2) spStep2.reset();
  if (spStep3) spStep3.reset();
  if (spStep4) spStep4.reset();
  
  // Unemployment forms
  const ueStep1 = document.getElementById("unemploymentStep1");
  const ueStep2 = document.getElementById("unemploymentStep2");
  const ueStep3 = document.getElementById("unemploymentStep3");
  const ueStep4 = document.getElementById("unemploymentStep4");
  if (ueStep1) ueStep1.reset();
  if (ueStep2) ueStep2.reset();
  if (ueStep3) ueStep3.reset();
  if (ueStep4) ueStep4.reset();
  
  // Low Income forms
const liStep1 = document.getElementById("lowIncomeStep1");
if (liStep1) liStep1.reset();
const liStep2 = document.getElementById("lowIncomeStep2");
if (liStep2) liStep2.reset();
const liStep3 = document.getElementById("lowIncomeStep3");
if (liStep3) liStep3.reset();
const liStep4 = document.getElementById("lowIncomeStep4");
if (liStep4) liStep4.reset();

// Job Seeker forms
const jsStep1 = document.getElementById("jobSeekerStep1");
const jsStep2 = document.getElementById("jobSeekerStep2");
const jsStep3 = document.getElementById("jobSeekerStep3");
const jsStep4 = document.getElementById("jobSeekerStep4");
if (jsStep1) jsStep1.reset();
if (jsStep2) jsStep2.reset();
if (jsStep3) jsStep3.reset();
if (jsStep4) jsStep4.reset();

// Business Permit forms
  const bpStep1 = document.getElementById("businessPermitStep1");
  const bpStep2 = document.getElementById("businessPermitStep2");
  const bpStep3 = document.getElementById("businessPermitStep3");
  const bpStep4 = document.getElementById("businessPermitStep4");
  if (bpStep1) bpStep1.reset();
  if (bpStep2) bpStep2.reset();
  if (bpStep3) bpStep3.reset();
  if (bpStep4) bpStep4.reset();

// Building Permit forms
const bdpStep1 = document.getElementById("buildingPermitStep1");
const bdpStep2 = document.getElementById("buildingPermitStep2");
const bdpStep3 = document.getElementById("buildingPermitStep3");
if (bdpStep1) bdpStep1.reset();
if (bdpStep2) bdpStep2.reset();
if (bdpStep3) bdpStep3.reset();

// Sanitary Permit forms
const sapStep1 = document.getElementById("sanitaryPermitStep1");
  const sapStep2 = document.getElementById("sanitaryPermitStep2");
  const sapStep3 = document.getElementById("sanitaryPermitStep3");
  if (sapStep1) sapStep1.reset();
  if (sapStep2) sapStep2.reset();
  if (sapStep3) sapStep3.reset();

  // Hide error messages
  document.getElementById("idContactNumberError").classList.add("hidden");
  document.getElementById("idEmergencyContactError").classList.add("hidden");
  document.getElementById("spContactNumberError").classList.add("hidden");
  document.getElementById("ueContactNumberError").classList.add("hidden");
  document.getElementById("bpContactNumberError").classList.add("hidden");
  document.getElementById("bpBusinessContactError").classList.add("hidden");
  document.getElementById("spOtherNatureContainer").classList.add("hidden");
  document.getElementById("spOtherPremisesContainer").classList.add("hidden");
  document.getElementById("spContactNumberError").classList.add("hidden");
}
// Hide all step containers/forms
function hideAllSteps() {
  // Barangay ID steps
  document.getElementById("barangayIDStep1").classList.add("hidden");
  document.getElementById("barangayIDStep2").classList.add("hidden");
  document.getElementById("barangayIDStep2b").classList.add("hidden");
  document.getElementById("barangayIDStep3").classList.add("hidden");
  document.getElementById("barangayIDStep4").classList.add("hidden");
  document.getElementById("barangayIDStep5").classList.add("hidden");
  
  // Barangay Clearance steps
  document.getElementById("clearanceStep1").classList.add("hidden");
  document.getElementById("clearanceStep1b").classList.add("hidden");
  document.getElementById("clearanceStep2").classList.add("hidden");
  document.getElementById("clearanceStep3").classList.add("hidden");
  document.getElementById("clearanceStep4").classList.add("hidden");
  
  // Barangay Indigency steps
  document.getElementById("indigencyStep1").classList.add("hidden");
  document.getElementById("indigencyStep1b").classList.add("hidden");
  document.getElementById("indigencyStep2").classList.add("hidden");
  document.getElementById("indigencyStep3").classList.add("hidden");
  document.getElementById("indigencyStep4").classList.add("hidden");
  
  // Barangay Residency steps
  document.getElementById("residencyStep1").classList.add("hidden");
  document.getElementById("residencyStep1b").classList.add("hidden");
  document.getElementById("residencyStep2").classList.add("hidden");
  document.getElementById("residencyStep3").classList.add("hidden");
  document.getElementById("residencyStep4").classList.add("hidden");
  
  // Good Moral Character steps
  document.getElementById("goodMoralStep1").classList.add("hidden");
  document.getElementById("goodMoralStep1b").classList.add("hidden");
  document.getElementById("goodMoralStep2").classList.add("hidden");
  document.getElementById("goodMoralStep3").classList.add("hidden");
  document.getElementById("goodMoralStep4").classList.add("hidden");
  
  // Solo Parent steps
  document.getElementById("soloParentStep1").classList.add("hidden");
  document.getElementById("soloParentStep2").classList.add("hidden");
  document.getElementById("soloParentStep3").classList.add("hidden");
  document.getElementById("soloParentStep4").classList.add("hidden");
  document.getElementById("soloParentStep5").classList.add("hidden");
  document.getElementById("soloParentStep6").classList.add("hidden");
  document.getElementById("soloParentStep7").classList.add("hidden");
  
  // Unemployment steps
  document.getElementById("unemploymentStep1").classList.add("hidden");
  document.getElementById("unemploymentStep2").classList.add("hidden");
  document.getElementById("unemploymentStep3").classList.add("hidden");
  document.getElementById("unemploymentStep4").classList.add("hidden");
  document.getElementById("unemploymentStep5").classList.add("hidden");
  document.getElementById("unemploymentStep6").classList.add("hidden");
  document.getElementById("unemploymentStep7").classList.add("hidden");

// Low Income steps
  document.getElementById("lowIncomeStep1").classList.add("hidden");
  document.getElementById("lowIncomeStep2").classList.add("hidden");
  document.getElementById("lowIncomeStep3").classList.add("hidden");
  document.getElementById("lowIncomeStep4").classList.add("hidden");
  document.getElementById("lowIncomeStep5").classList.add("hidden");
  document.getElementById("lowIncomeStep6").classList.add("hidden");
  document.getElementById("lowIncomeStep7").classList.add("hidden");

  // Job Seeker steps
  document.getElementById("jobSeekerStep1").classList.add("hidden");
  document.getElementById("jobSeekerStep2").classList.add("hidden");
  document.getElementById("jobSeekerStep3").classList.add("hidden");
  document.getElementById("jobSeekerStep4").classList.add("hidden");
  document.getElementById("jobSeekerStep5").classList.add("hidden");
  document.getElementById("jobSeekerStep6").classList.add("hidden");
  document.getElementById("jobSeekerStep7").classList.add("hidden");

  // Business Permit steps
  document.getElementById("businessPermitStep1").classList.add("hidden");
  document.getElementById("businessPermitStep2").classList.add("hidden");
  document.getElementById("businessPermitStep3").classList.add("hidden");
  document.getElementById("businessPermitStep4").classList.add("hidden");
  document.getElementById("businessPermitStep5").classList.add("hidden");
  document.getElementById("businessPermitStep6").classList.add("hidden");
  document.getElementById("businessPermitStep7").classList.add("hidden");

// Building Permit steps
  document.getElementById("buildingPermitStep1").classList.add("hidden");
  document.getElementById("buildingPermitStep2").classList.add("hidden");
  document.getElementById("buildingPermitStep3").classList.add("hidden");
  document.getElementById("buildingPermitStep4").classList.add("hidden");
  document.getElementById("buildingPermitStep5").classList.add("hidden");
  document.getElementById("buildingPermitStep6").classList.add("hidden");

  // Sanitary Permit steps
  document.getElementById("sanitaryPermitStep1").classList.add("hidden");
  document.getElementById("sanitaryPermitStep2").classList.add("hidden");
  document.getElementById("sanitaryPermitStep3").classList.add("hidden");
  document.getElementById("sanitaryPermitStep4").classList.add("hidden");
  document.getElementById("sanitaryPermitStep5").classList.add("hidden");
  document.getElementById("sanitaryPermitStep6").classList.add("hidden");
}


 // Open form modal for a service
 function openForm(service) {
  formModal.classList.remove("hidden");
  resetAllForms();
  hideAllSteps();
  if (service === "barangayID") {
    document.getElementById("barangayIDStep1").classList.remove("hidden");
  } else if (service === "barangayClearance") {
    document.getElementById("clearanceStep1").classList.remove("hidden");
  } else if (service === "barangayIndigency") {
    document.getElementById("indigencyStep1").classList.remove("hidden");
  } else if (service === "barangayResidency") {
    document.getElementById("residencyStep1").classList.remove("hidden");
  } else if (service === "goodMoral") {
    document.getElementById("goodMoralStep1").classList.remove("hidden");
  } else if (service === "soloParent") {
    document.getElementById("soloParentStep1").classList.remove("hidden");
  } else if (service === "unemployment") {
    document.getElementById("unemploymentStep1").classList.remove("hidden");
  } else if (service === "lowIncome") {
  document.getElementById("lowIncomeStep1").classList.remove("hidden");
  } else if (service === "firstTimeJobSeeker") {
  document.getElementById("jobSeekerStep1").classList.remove("hidden");
  } else if (service === "businessPermit") {
    document.getElementById("businessPermitStep1").classList.remove("hidden");
  } else if (service === "buildingPermit") {
  document.getElementById("buildingPermitStep1").classList.remove("hidden");
  } else if (service === "sanitaryPermit") {
    document.getElementById("sanitaryPermitStep1").classList.remove("hidden");
  }
}

 // Toggle side dropdown menus
 function toggleBottomDropdown(dropdownId, buttonId) {
   const dropdown = document.getElementById(dropdownId);
   const button = document.getElementById(buttonId);
   const icon = button.querySelector("i.fas");
   const isShown = dropdown.classList.contains("show");

   // Close all dropdowns first
   document.querySelectorAll(".dropdown-menu").forEach((menu) => {
     menu.classList.remove("show");
   });
   document.querySelectorAll("button[aria-expanded]").forEach((btn) => {
     btn.setAttribute("aria-expanded", "false");
     const btnIcon = btn.querySelector("i.fas");
     if (btnIcon) btnIcon.style.transform = "rotate(0deg)";
   });

   if (!isShown) {
     dropdown.classList.add("show");
     button.setAttribute("aria-expanded", "true");
     if (icon) icon.style.transform = "rotate(180deg)";
   } else {
     dropdown.classList.remove("show");
     button.setAttribute("aria-expanded", "false");
     if (icon) icon.style.transform = "rotate(0deg)";
   }
 }

 // Close dropdowns if clicked outside
 document.addEventListener("click", (e) => {
   if (
     !certificatesBtn.contains(e.target) &&
     !certificatesDropdown.contains(e.target)
   ) {
     certificatesDropdown.classList.remove("show");
     certificatesBtn.setAttribute("aria-expanded", "false");
     const certificatesIcon = document.getElementById("certificatesIcon");
     if (certificatesIcon) certificatesIcon.style.transform = "rotate(0deg)";
   }
   if (!permitBtn.contains(e.target) && !permitDropdown.contains(e.target)) {
     permitDropdown.classList.remove("show");
     permitBtn.setAttribute("aria-expanded", "false");
     const permitIcon = document.getElementById("permitIcon");
     if (permitIcon) permitIcon.style.transform = "rotate(0deg)";
   }
 });

 // ---------------- Barangay ID Form Logic ----------------
 const barangayIDStep1 = document.getElementById("barangayIDStep1");
const barangayIDStep2 = document.getElementById("barangayIDStep2");
const barangayIDStep2b = document.getElementById("barangayIDStep2b");
const barangayIDStep3 = document.getElementById("barangayIDStep3");
const barangayIDStep4 = document.getElementById("barangayIDStep4");
const barangayIDStep5 = document.getElementById("barangayIDStep5");

// Confirmation spans
const idConfirmFullName = document.getElementById("idConfirmFullName");
const idConfirmContactNumber = document.getElementById("idConfirmContactNumber");
const idConfirmAddress = document.getElementById("idConfirmAddress");
const idConfirmEmergencyName = document.getElementById("idConfirmEmergencyName");
const idConfirmEmergencyContact = document.getElementById("idConfirmEmergencyContact");

barangayIDStep1.addEventListener("submit", (e) => {
  e.preventDefault();
  const contactInput = barangayIDStep1.idContactNumber;
  const contactError = document.getElementById("idContactNumberError");
  const contactVal = contactInput.value.trim();
  if (!/^\d{11,15}$/.test(contactVal)) {
    contactError.classList.remove("hidden");
    contactInput.focus();
    return;
  } else {
    contactError.classList.add("hidden");
  }
  if (!barangayIDStep1.checkValidity()) {
    barangayIDStep1.reportValidity();
    return;
  }
  barangayIDStep1.classList.add("hidden");
  barangayIDStep2.classList.remove("hidden");
});

barangayIDStep2.addEventListener("submit", (e) => {
  e.preventDefault();
  const emergencyInput = barangayIDStep2.idEmergencyContact;
  const emergencyError = document.getElementById("idEmergencyContactError");
  const emergencyVal = emergencyInput.value.trim();
  if (!/^\d{11,15}$/.test(emergencyVal)) {
    emergencyError.classList.remove("hidden");
    emergencyInput.focus();
    return;
  } else {
    emergencyError.classList.add("hidden");
  }
  if (!barangayIDStep2.checkValidity()) {
    barangayIDStep2.reportValidity();
    return;
  }
  barangayIDStep2.classList.add("hidden");
  barangayIDStep2b.classList.remove("hidden");
});

barangayIDStep2b.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!barangayIDStep2b.checkValidity()) {
    barangayIDStep2b.reportValidity();
    return;
  }
  // Fill confirmation fields
  idConfirmFullName.textContent = barangayIDStep1.idFullName.value.trim();
  idConfirmContactNumber.textContent = barangayIDStep1.idContactNumber.value.trim();
  idConfirmAddress.textContent = barangayIDStep1.idAddress.value.trim();
  idConfirmEmergencyName.textContent = barangayIDStep2.idEmergencyName.value.trim();
  idConfirmEmergencyContact.textContent = barangayIDStep2.idEmergencyContact.value.trim();

  barangayIDStep2b.classList.add("hidden");
  barangayIDStep3.classList.remove("hidden");
});

function barangayIDGoBackToStep1() {
  barangayIDStep2.classList.add("hidden");
  barangayIDStep1.classList.remove("hidden");
}

function barangayIDGoBackToStep2() {
  barangayIDStep2b.classList.add("hidden");
  barangayIDStep2.classList.remove("hidden");
}

function barangayIDEdit() {
  barangayIDStep3.classList.add("hidden");
  barangayIDStep1.classList.remove("hidden");
}

function barangayIDGoToSend() {
  barangayIDStep3.classList.add("hidden");
  barangayIDStep4.classList.remove("hidden");
}

function barangayIDBackToConfirmation() {
  barangayIDStep4.classList.add("hidden");
  barangayIDStep3.classList.remove("hidden");
}

function barangayIDSendRequest() {
  barangayIDStep4.classList.add("hidden");
  barangayIDStep5.classList.remove("hidden");
}

 // ---------------- Barangay Clearance Form Logic ----------------
 const clearanceStep1 = document.getElementById("clearanceStep1");
const clearanceStep1b = document.getElementById("clearanceStep1b");
const clearanceStep2 = document.getElementById("clearanceStep2");
const clearanceStep3 = document.getElementById("clearanceStep3");
const clearanceStep4 = document.getElementById("clearanceStep4");

 // Confirmation spans for Clearance
 const clConfirmFullName = document.getElementById("clConfirmFullName");
const clConfirmDOB = document.getElementById("clConfirmDOB");
const clConfirmPOB = document.getElementById("clConfirmPOB");
const clConfirmGender = document.getElementById("clConfirmGender");
const clConfirmCivilStatus = document.getElementById("clConfirmCivilStatus");
const clConfirmCitizenship = document.getElementById("clConfirmCitizenship");
const clConfirmAddress = document.getElementById("clConfirmAddress");
const clConfirmYearsResidency = document.getElementById("clConfirmYearsResidency");
const clConfirmPurpose = document.getElementById("clConfirmPurpose");

clearanceStep1.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!clearanceStep1.checkValidity()) {
    clearanceStep1.reportValidity();
    return;
  }
  clearanceStep1.classList.add("hidden");
  clearanceStep1b.classList.remove("hidden");
});

clearanceStep1b.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!clearanceStep1b.checkValidity()) {
    clearanceStep1b.reportValidity();
    return;
  }
   // Directly go to confirmation step (clearanceStep2 is removed)
   // Fill confirmation fields here
   clConfirmFullName.textContent = clearanceStep1.clFullName.value.trim();
  clConfirmDOB.textContent = clearanceStep1.clDOB.value;
  clConfirmPOB.textContent = clearanceStep1.clPOB.value.trim();
  clConfirmGender.textContent = clearanceStep1.clGender.value;
  clConfirmCivilStatus.textContent = clearanceStep1.clCivilStatus.value;
  clConfirmCitizenship.textContent = clearanceStep1.clCitizenship.value.trim();
  clConfirmAddress.textContent = clearanceStep1.clAddress.value.trim();
  clConfirmYearsResidency.textContent = clearanceStep1.clYearsResidency.value.trim();
  clConfirmPurpose.textContent = clearanceStep1.clPurpose.value;

  clearanceStep1b.classList.add("hidden");
  clearanceStep2.classList.remove("hidden");
});

function clearanceGoBackToStep1() {
  clearanceStep1b.classList.add("hidden");
  clearanceStep1.classList.remove("hidden");
}

function clearanceEdit() {
  clearanceStep2.classList.add("hidden");
  clearanceStep1.classList.remove("hidden");
}

function clearanceGoToSend() {
  clearanceStep2.classList.add("hidden");
  clearanceStep3.classList.remove("hidden");
}

function clearanceBackToConfirmation() {
  clearanceStep3.classList.add("hidden");
  clearanceStep2.classList.remove("hidden");
}

function clearanceSendRequest() {
  clearanceStep3.classList.add("hidden");
  clearanceStep4.classList.remove("hidden");
}
  // ---------------- Barangay Indigency Form Logic ----------------
  const indigencyStep1 = document.getElementById("indigencyStep1");
const indigencyStep1b = document.getElementById("indigencyStep1b");
const indigencyStep2 = document.getElementById("indigencyStep2");
const indigencyStep3 = document.getElementById("indigencyStep3");
const indigencyStep4 = document.getElementById("indigencyStep4");

 // Confirmation spans for Indigency
 const indConfirmFullName = document.getElementById("indConfirmFullName");
 const indConfirmDOB = document.getElementById("indConfirmDOB");
 const indConfirmAddress = document.getElementById("indConfirmAddress");
 const indConfirmReason = document.getElementById("indConfirmReason");
 const indConfirmIncome = document.getElementById("indConfirmIncome");

 indigencyStep1.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!indigencyStep1.checkValidity()) {
    indigencyStep1.reportValidity();
    return;
  }
  indigencyStep1.classList.add("hidden");
  indigencyStep1b.classList.remove("hidden");
});

indigencyStep1b.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!indigencyStep1b.checkValidity()) {
    indigencyStep1b.reportValidity();
    return;
  }
  // Fill confirmation fields
  indConfirmFullName.textContent = indigencyStep1.indFullName.value.trim();
  indConfirmDOB.textContent = indigencyStep1.indDOB.value;
  indConfirmAddress.textContent = indigencyStep1.indAddress.value.trim();
  indConfirmReason.textContent = indigencyStep1.indReason.value;
  const incomeVal = indigencyStep1.indIncome.value.trim();
  indConfirmIncome.textContent = incomeVal === "" ? "No Income" : incomeVal;

  indigencyStep1b.classList.add("hidden");
  indigencyStep2.classList.remove("hidden");
});

function indigencyGoBackToStep1() {
  indigencyStep1b.classList.add("hidden");
  indigencyStep1.classList.remove("hidden");
}

function indigencyGoToSend() {
  indigencyStep2.classList.add("hidden");
  indigencyStep3.classList.remove("hidden");
}

function indigencyBackToConfirmation() {
  indigencyStep3.classList.add("hidden");
  indigencyStep2.classList.remove("hidden");
}

function indigencySendRequest() {
  indigencyStep3.classList.add("hidden");
  indigencyStep4.classList.remove("hidden");
}
 // ---------------- Barangay Residency Form Logic ----------------
 const residencyStep1 = document.getElementById("residencyStep1");
const residencyStep1b = document.getElementById("residencyStep1b");
const residencyStep2 = document.getElementById("residencyStep2");
const residencyStep3 = document.getElementById("residencyStep3");
const residencyStep4 = document.getElementById("residencyStep4");

// Confirmation spans
const resConfirmFullName = document.getElementById("resConfirmFullName");
const resConfirmDOB = document.getElementById("resConfirmDOB");
const resConfirmAddress = document.getElementById("resConfirmAddress");
const resConfirmLengthStay = document.getElementById("resConfirmLengthStay");
const resConfirmPurpose = document.getElementById("resConfirmPurpose");

residencyStep1.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!residencyStep1.checkValidity()) {
    residencyStep1.reportValidity();
    return;
  }
  residencyStep1.classList.add("hidden");
  residencyStep1b.classList.remove("hidden");
});

residencyStep1b.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!residencyStep1b.checkValidity()) {
    residencyStep1b.reportValidity();
    return;
  }
   // Fill confirmation fields
   resConfirmFullName.textContent = residencyStep1.resFullName.value.trim();
  resConfirmDOB.textContent = residencyStep1.resDOB.value;
  resConfirmAddress.textContent = residencyStep1.resAddress.value.trim();
  resConfirmLengthStay.textContent = residencyStep1.resLengthStay.value.trim();
  resConfirmPurpose.textContent = residencyStep1.resPurpose.value;

  residencyStep1b.classList.add("hidden");
  residencyStep2.classList.remove("hidden");
});

function residencyGoBackToStep1() {
  residencyStep1b.classList.add("hidden");
  residencyStep1.classList.remove("hidden");
}

function residencyGoToSend() {
  residencyStep2.classList.add("hidden");
  residencyStep3.classList.remove("hidden");
}

function residencyBackToConfirmation() {
  residencyStep3.classList.add("hidden");
  residencyStep2.classList.remove("hidden");
}

function residencySendRequest() {
  residencyStep3.classList.add("hidden");
  residencyStep4.classList.remove("hidden");
}


// ---------------- Good Moral Character Form Logic ----------------
const goodMoralStep1 = document.getElementById("goodMoralStep1");
const goodMoralStep1b = document.getElementById("goodMoralStep1b");
const goodMoralStep2 = document.getElementById("goodMoralStep2");
const goodMoralStep3 = document.getElementById("goodMoralStep3");
const goodMoralStep4 = document.getElementById("goodMoralStep4");

// Confirmation spans
const gmConfirmFullName = document.getElementById("gmConfirmFullName");
const gmConfirmAddress = document.getElementById("gmConfirmAddress");
const gmConfirmStatus = document.getElementById("gmConfirmStatus");
const gmConfirmLengthResidency = document.getElementById("gmConfirmLengthResidency");
const gmConfirmPurpose = document.getElementById("gmConfirmPurpose");

goodMoralStep1.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!goodMoralStep1.checkValidity()) {
    goodMoralStep1.reportValidity();
    return;
  }
  goodMoralStep1.classList.add("hidden");
  goodMoralStep1b.classList.remove("hidden");
});

goodMoralStep1b.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!goodMoralStep1b.checkValidity()) {
    goodMoralStep1b.reportValidity();
    return;
  }
  // Fill confirmation fields
  gmConfirmFullName.textContent = goodMoralStep1.gmFullName.value.trim();
  gmConfirmAddress.textContent = goodMoralStep1.gmAddress.value.trim();
  gmConfirmStatus.textContent = goodMoralStep1.gmStatus.value;
  gmConfirmLengthResidency.textContent = goodMoralStep1.gmLengthResidency.value.trim();
  gmConfirmPurpose.textContent = goodMoralStep1.gmPurpose.value;

  goodMoralStep1b.classList.add("hidden");
  goodMoralStep2.classList.remove("hidden");
});

function goodMoralGoBackToStep1() {
  goodMoralStep1b.classList.add("hidden");
  goodMoralStep1.classList.remove("hidden");
}

function goodMoralGoToSend() {
  goodMoralStep2.classList.add("hidden");
  goodMoralStep3.classList.remove("hidden");
}

function goodMoralBackToConfirmation() {
  goodMoralStep3.classList.add("hidden");
  goodMoralStep2.classList.remove("hidden");
}

function goodMoralSendRequest() {
  goodMoralStep3.classList.add("hidden");
  goodMoralStep4.classList.remove("hidden");
}

// ---------------- Solo Parent Form Logic ----------------
const soloParentStep1 = document.getElementById("soloParentStep1");
const soloParentStep2 = document.getElementById("soloParentStep2");
const soloParentStep3 = document.getElementById("soloParentStep3");
const soloParentStep4 = document.getElementById("soloParentStep4");
const soloParentStep5 = document.getElementById("soloParentStep5");
const soloParentStep6 = document.getElementById("soloParentStep6");
const soloParentStep7 = document.getElementById("soloParentStep7");

// Show/hide other reason field based on radio selection
document.querySelectorAll('input[name="spReason"]').forEach(radio => {
  radio.addEventListener('change', function() {
    document.getElementById("spOtherReasonContainer").classList.toggle("hidden", this.value !== "Other");
  });
});

// Show/hide other purpose field based on dropdown selection
document.getElementById("spPurpose").addEventListener('change', function() {
  document.getElementById("spOtherPurposeContainer").classList.toggle("hidden", this.value !== "Other");
});

// Dependent management
let dependentCount = 1;

function addDependent() {
  dependentCount++;
  const container = document.getElementById("dependentsContainer");
  const newDependent = document.createElement("div");
  newDependent.className = "dependent-form border-b border-gray-200 pb-4 mb-4";
  newDependent.innerHTML = `
    <div class="flex justify-between items-center mb-2">
      <h3 class="font-medium">Child #${dependentCount}</h3>
      <button type="button" onclick="removeDependent(this)" class="text-red-600 text-sm">Remove</button>
    </div>
    <div class="space-y-4">
      <div>
        <label class="block font-medium mb-1" for="spChildName${dependentCount}">Full Name of Child</label>
        <input
          id="spChildName${dependentCount}"
          name="spChildName[]"
          type="text"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
          placeholder="Enter child's full name"
        />
      </div>
      <div>
        <label class="block font-medium mb-1" for="spChildDOB${dependentCount}">Date of Birth</label>
        <input
          id="spChildDOB${dependentCount}"
          name="spChildDOB[]"
          type="date"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
          onchange="calculateAge(this)"
        />
      </div>
      <div>
        <label class="block font-medium mb-1" for="spChildAge${dependentCount}">Age</label>
        <input
          id="spChildAge${dependentCount}"
          name="spChildAge[]"
          type="text"
          readonly
          class="w-full border border-gray-300 rounded px-3 py-2 bg-gray-100"
        />
      </div>
      <div>
        <label class="block font-medium mb-1" for="spChildRelationship${dependentCount}">Relationship</label>
        <select
          id="spChildRelationship${dependentCount}"
          name="spChildRelationship[]"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#f94e4e]"
        >
          <option value="" disabled selected>Select relationship</option>
          <option>Son</option>
          <option>Daughter</option>
          <option>Stepchild</option>
          <option>Adopted Child</option>
          <option>Foster Child</option>
        </select>
      </div>
      <div>
        <label class="block font-medium mb-1">Living With You?</label>
        <div class="flex space-x-4">
          <label class="flex items-center">
            <input type="radio" name="spChildLivingWithYou${dependentCount}" value="Yes" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]" required>
            <span class="ml-2">Yes</span>
          </label>
          <label class="flex items-center">
            <input type="radio" name="spChildLivingWithYou${dependentCount}" value="No" class="form-radio text-[#f94e4e] focus:ring-[#f94e4e]">
            <span class="ml-2">No</span>
          </label>
        </div>
      </div>
    </div>
  `;
  container.appendChild(newDependent);
}

function removeDependent(button) {
  if (dependentCount > 1) {
    const dependentForm = button.closest(".dependent-form");
    dependentForm.remove();
    dependentCount--;
    // Renumber remaining dependents
    const dependents = document.querySelectorAll(".dependent-form");
    dependents.forEach((form, index) => {
      form.querySelector("h3").textContent = `Child #${index + 1}`;
    });
  }
}

function calculateAge(dateInput) {
  const dob = new Date(dateInput.value);
  const today = new Date();
  let age = today.getFullYear() - dob.getFullYear();
  const m = today.getMonth() - dob.getMonth();
  if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {
    age--;
  }
  const ageInput = dateInput.parentElement.nextElementSibling.querySelector("input");
  ageInput.value = age;
}

// Form submission handlers
soloParentStep1.addEventListener("submit", (e) => {
  e.preventDefault();
  const contactInput = soloParentStep1.spContactNumber;
  const contactError = document.getElementById("spContactNumberError");
  const contactVal = contactInput.value.trim();
  if (!/^\d{11,15}$/.test(contactVal)) {
    contactError.classList.remove("hidden");
    contactInput.focus();
    return;
  } else {
    contactError.classList.add("hidden");
  }
  if (!soloParentStep1.checkValidity()) {
    soloParentStep1.reportValidity();
    return;
  }
  soloParentStep1.classList.add("hidden");
  soloParentStep2.classList.remove("hidden");
});

soloParentStep2.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!soloParentStep2.checkValidity()) {
    soloParentStep2.reportValidity();
    return;
  }
  soloParentStep2.classList.add("hidden");
  soloParentStep3.classList.remove("hidden");
});

soloParentStep3.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!soloParentStep3.checkValidity()) {
    soloParentStep3.reportValidity();
    return;
  }
  soloParentStep3.classList.add("hidden");
  soloParentStep4.classList.remove("hidden");
});

soloParentStep4.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!soloParentStep4.checkValidity()) {
    soloParentStep4.reportValidity();
    return;
  }
  
  // Fill confirmation fields
  document.getElementById("spConfirmFullName").textContent = soloParentStep1.spFullName.value.trim();
  document.getElementById("spConfirmDOB").textContent = soloParentStep1.spDOB.value;
  document.getElementById("spConfirmSex").textContent = soloParentStep1.spSex.value;
  document.getElementById("spConfirmCivilStatus").textContent = soloParentStep1.spCivilStatus.value;
  document.getElementById("spConfirmAddress").textContent = soloParentStep1.spAddress.value.trim();
  document.getElementById("spConfirmContactNumber").textContent = soloParentStep1.spContactNumber.value.trim();
  
  const reason = document.querySelector('input[name="spReason"]:checked').value;
  document.getElementById("spConfirmReason").textContent = reason;
  if (reason === "Other") {
    document.getElementById("spConfirmOtherReason").classList.remove("hidden");
    document.getElementById("spConfirmOtherReason").querySelector("span").textContent = soloParentStep2.spOtherReason.value.trim();
  } else {
    document.getElementById("spConfirmOtherReason").classList.add("hidden");
  }
  
  const duration = soloParentStep2.spDuration.value + " " + soloParentStep2.spDurationUnit.value;
  document.getElementById("spConfirmDuration").textContent = duration;
  
  // Display dependents
  const dependentsContainer = document.getElementById("spConfirmDependents");
  dependentsContainer.innerHTML = "";
  const childNames = document.querySelectorAll('input[name="spChildName[]"]');
  childNames.forEach((child, index) => {
    const childDiv = document.createElement("div");
    childDiv.className = "mb-4 pb-4 border-b border-gray-200";
    childDiv.innerHTML = `
      <p><strong>Child ${index + 1} Name:</strong> ${child.value}</p>
      <p><strong>Date of Birth:</strong> ${document.querySelectorAll('input[name="spChildDOB[]"]')[index].value}</p>
      <p><strong>Age:</strong> ${document.querySelectorAll('input[name="spChildAge[]"]')[index].value}</p>
      <p><strong>Relationship:</strong> ${document.querySelectorAll('select[name="spChildRelationship[]"]')[index].value}</p>
      <p><strong>Living With You:</strong> ${document.querySelector(`input[name="spChildLivingWithYou${index + 1}"]:checked`).value}</p>
    `;
    dependentsContainer.appendChild(childDiv);
  });
  
  const purpose = soloParentStep4.spPurpose.value;
  document.getElementById("spConfirmPurpose").textContent = purpose;
  if (purpose === "Other") {
    document.getElementById("spConfirmOtherPurpose").classList.remove("hidden");
    document.getElementById("spConfirmOtherPurpose").querySelector("span").textContent = soloParentStep4.spOtherPurpose.value.trim();
  } else {
    document.getElementById("spConfirmOtherPurpose").classList.add("hidden");
  }
  
  soloParentStep4.classList.add("hidden");
  soloParentStep5.classList.remove("hidden");
});

// Navigation functions
function soloParentGoBackToStep1() {
  soloParentStep2.classList.add("hidden");
  soloParentStep1.classList.remove("hidden");
}

function soloParentGoBackToStep2() {
  soloParentStep3.classList.add("hidden");
  soloParentStep2.classList.remove("hidden");
}

function soloParentGoBackToStep3() {
  soloParentStep4.classList.add("hidden");
  soloParentStep3.classList.remove("hidden");
}

function soloParentEdit() {
  soloParentStep5.classList.add("hidden");
  soloParentStep1.classList.remove("hidden");
}

function soloParentGoToSend() {
  soloParentStep5.classList.add("hidden");
  soloParentStep6.classList.remove("hidden");
}

function soloParentBackToConfirmation() {
  soloParentStep6.classList.add("hidden");
  soloParentStep5.classList.remove("hidden");
}

function soloParentSendRequest() {
  soloParentStep6.classList.add("hidden");
  soloParentStep7.classList.remove("hidden");
}

// ---------------- Unemployment Form Logic ----------------
const unemploymentStep1 = document.getElementById("unemploymentStep1");
const unemploymentStep2 = document.getElementById("unemploymentStep2");
const unemploymentStep3 = document.getElementById("unemploymentStep3");
const unemploymentStep4 = document.getElementById("unemploymentStep4");
const unemploymentStep5 = document.getElementById("unemploymentStep5");
const unemploymentStep6 = document.getElementById("unemploymentStep6");
const unemploymentStep7 = document.getElementById("unemploymentStep7");

// Show/hide employment history based on current employment status
document.querySelectorAll('input[name="ueCurrentlyEmployed"]').forEach(radio => {
  radio.addEventListener('change', function() {
    document.getElementById("ueEmploymentHistoryContainer").classList.toggle("hidden", this.value === "Yes");
  });
});

// Show/hide other reason field based on dropdown selection
document.getElementById("ueReason").addEventListener('change', function() {
  document.getElementById("ueOtherReasonContainer").classList.toggle("hidden", this.value !== "Other");
});

// Show/hide other purpose field based on dropdown selection
document.getElementById("uePurpose").addEventListener('change', function() {
  document.getElementById("ueOtherPurposeContainer").classList.toggle("hidden", this.value !== "Other");
});

// Form submission handlers
unemploymentStep1.addEventListener("submit", (e) => {
  e.preventDefault();
  const contactInput = unemploymentStep1.ueContactNumber;
  const contactError = document.getElementById("ueContactNumberError");
  const contactVal = contactInput.value.trim();
  if (!/^\d{11,15}$/.test(contactVal)) {
    contactError.classList.remove("hidden");
    contactInput.focus();
    return;
  } else {
    contactError.classList.add("hidden");
  }
  if (!unemploymentStep1.checkValidity()) {
    unemploymentStep1.reportValidity();
    return;
  }
  unemploymentStep1.classList.add("hidden");
  unemploymentStep2.classList.remove("hidden");
});

unemploymentStep2.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!unemploymentStep2.checkValidity()) {
    unemploymentStep2.reportValidity();
    return;
  }
  unemploymentStep2.classList.add("hidden");
  unemploymentStep3.classList.remove("hidden");
});

unemploymentStep3.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!unemploymentStep3.checkValidity()) {
    unemploymentStep3.reportValidity();
    return;
  }
  unemploymentStep3.classList.add("hidden");
  unemploymentStep4.classList.remove("hidden");
});

unemploymentStep4.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!unemploymentStep4.checkValidity()) {
    unemploymentStep4.reportValidity();
    return;
  }
  
  // Fill confirmation fields
  document.getElementById("ueConfirmFullName").textContent = unemploymentStep1.ueFullName.value.trim();
  document.getElementById("ueConfirmDOB").textContent = unemploymentStep1.ueDOB.value;
  document.getElementById("ueConfirmSex").textContent = unemploymentStep1.ueSex.value;
  document.getElementById("ueConfirmCivilStatus").textContent = unemploymentStep1.ueCivilStatus.value;
  document.getElementById("ueConfirmAddress").textContent = unemploymentStep1.ueAddress.value.trim();
  document.getElementById("ueConfirmContactNumber").textContent = unemploymentStep1.ueContactNumber.value.trim();
  document.getElementById("ueConfirmYearsResidency").textContent = unemploymentStep1.ueYearsResidency.value + " years";
  
  const currentlyEmployed = document.querySelector('input[name="ueCurrentlyEmployed"]:checked').value;
  document.getElementById("ueConfirmCurrentlyEmployed").textContent = currentlyEmployed;
  
  if (currentlyEmployed === "No") {
    document.getElementById("ueConfirmEmploymentDetails").classList.remove("hidden");
    document.getElementById("ueConfirmLastEmployer").textContent = unemploymentStep2.ueLastEmployer.value.trim();
    document.getElementById("ueConfirmJobTitle").textContent = unemploymentStep2.ueJobTitle.value.trim();
    document.getElementById("ueConfirmLastDate").textContent = unemploymentStep2.ueLastDate.value;
    
    const reason = unemploymentStep2.ueReason.value;
    document.getElementById("ueConfirmReason").textContent = reason;
    if (reason === "Other") {
      document.getElementById("ueConfirmOtherReason").classList.remove("hidden");
      document.getElementById("ueConfirmOtherReason").querySelector("span").textContent = unemploymentStep2.ueOtherReason.value.trim();
    } else {
      document.getElementById("ueConfirmOtherReason").classList.add("hidden");
    }
  } else {
    document.getElementById("ueConfirmEmploymentDetails").classList.add("hidden");
  }
  
  const purpose = unemploymentStep3.uePurpose.value;
  document.getElementById("ueConfirmPurpose").textContent = purpose;
  if (purpose === "Other") {
    document.getElementById("ueConfirmOtherPurpose").classList.remove("hidden");
    document.getElementById("ueConfirmOtherPurpose").querySelector("span").textContent = unemploymentStep3.ueOtherPurpose.value.trim();
  } else {
    document.getElementById("ueConfirmOtherPurpose").classList.add("hidden");
  }
  
  unemploymentStep4.classList.add("hidden");
  unemploymentStep5.classList.remove("hidden");
});

// Navigation functions
function unemploymentGoBackToStep1() {
  unemploymentStep2.classList.add("hidden");
  unemploymentStep1.classList.remove("hidden");
}

function unemploymentGoBackToStep2() {
  unemploymentStep3.classList.add("hidden");
  unemploymentStep2.classList.remove("hidden");
}

function unemploymentGoBackToStep3() {
  unemploymentStep4.classList.add("hidden");
  unemploymentStep3.classList.remove("hidden");
}

function unemploymentEdit() {
  unemploymentStep5.classList.add("hidden");
  unemploymentStep1.classList.remove("hidden");
}

function unemploymentGoToSend() {
  unemploymentStep5.classList.add("hidden");
  unemploymentStep6.classList.remove("hidden");
}

function unemploymentBackToConfirmation() {
  unemploymentStep6.classList.add("hidden");
  unemploymentStep5.classList.remove("hidden");
}

function unemploymentSendRequest() {
  unemploymentStep6.classList.add("hidden");
  unemploymentStep7.classList.remove("hidden");
}

// ---------------- Low Income Form Logic ----------------
const lowIncomeStep1 = document.getElementById("lowIncomeStep1");
const lowIncomeStep2 = document.getElementById("lowIncomeStep2");
const lowIncomeStep3 = document.getElementById("lowIncomeStep3");
const lowIncomeStep4 = document.getElementById("lowIncomeStep4");
const lowIncomeStep5 = document.getElementById("lowIncomeStep5");
const lowIncomeStep6 = document.getElementById("lowIncomeStep6");
const lowIncomeStep7 = document.getElementById("lowIncomeStep7");

// Show/hide other aid field based on dropdown selection
document.getElementById("liGovernmentAid").addEventListener('change', function() {
  document.getElementById("liOtherAidContainer").classList.toggle("hidden", this.value !== "Other");
});

// Show/hide other purpose field based on dropdown selection
document.getElementById("liPurpose").addEventListener('change', function() {
  document.getElementById("liOtherPurposeContainer").classList.toggle("hidden", this.value !== "Other");
});

lowIncomeStep1.addEventListener("submit", (e) => {
  e.preventDefault();
  const contactInput = lowIncomeStep1.liContactNumber;
  const contactError = document.getElementById("liContactNumberError");
  const contactVal = contactInput.value.trim();
  if (!/^\d{11,15}$/.test(contactVal)) {
    contactError.classList.remove("hidden");
    contactInput.focus();
    return;
  } else {
    contactError.classList.add("hidden");
  }
  if (!lowIncomeStep1.checkValidity()) {
    lowIncomeStep1.reportValidity();
    return;
  }
  lowIncomeStep1.classList.add("hidden");
  lowIncomeStep2.classList.remove("hidden");
});

lowIncomeStep2.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!lowIncomeStep2.checkValidity()) {
    lowIncomeStep2.reportValidity();
    return;
  }
  lowIncomeStep2.classList.add("hidden");
  lowIncomeStep3.classList.remove("hidden");
});

lowIncomeStep3.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!lowIncomeStep3.checkValidity()) {
    lowIncomeStep3.reportValidity();
    return;
  }
  lowIncomeStep3.classList.add("hidden");
  lowIncomeStep4.classList.remove("hidden");
});

lowIncomeStep4.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!lowIncomeStep4.checkValidity()) {
    lowIncomeStep4.reportValidity();
    return;
  }
  
  // Fill confirmation fields
  document.getElementById("liConfirmFullName").textContent = lowIncomeStep1.liFullName.value.trim();
  document.getElementById("liConfirmDOB").textContent = lowIncomeStep1.liDOB.value;
  document.getElementById("liConfirmSex").textContent = lowIncomeStep1.liSex.value;
  document.getElementById("liConfirmCivilStatus").textContent = lowIncomeStep1.liCivilStatus.value;
  document.getElementById("liConfirmAddress").textContent = lowIncomeStep1.liAddress.value.trim();
  document.getElementById("liConfirmContactNumber").textContent = lowIncomeStep1.liContactNumber.value.trim();
  document.getElementById("liConfirmYearsResidency").textContent = lowIncomeStep1.liYearsResidency.value + " years";
  
  document.getElementById("liConfirmEmploymentStatus").textContent = lowIncomeStep2.liEmploymentStatus.value;
  document.getElementById("liConfirmMonthlyIncome").textContent = lowIncomeStep2.liMonthlyIncome.value;
  document.getElementById("liConfirmIncomeSource").textContent = lowIncomeStep2.liIncomeSource.value.trim() || "None";
  document.getElementById("liConfirmHouseholdMembers").textContent = lowIncomeStep2.liHouseholdMembers.value;
  document.getElementById("liConfirmHeadOfHousehold").textContent = document.querySelector('input[name="liHeadOfHousehold"]:checked').value;
  
  const aid = lowIncomeStep2.liGovernmentAid.value;
  document.getElementById("liConfirmGovernmentAid").textContent = aid;
  if (aid === "Other") {
    document.getElementById("liConfirmOtherAid").classList.remove("hidden");
    document.getElementById("liConfirmOtherAid").querySelector("span").textContent = lowIncomeStep2.liOtherAid.value.trim();
  } else {
    document.getElementById("liConfirmOtherAid").classList.add("hidden");
  }
  
  const purpose = lowIncomeStep3.liPurpose.value;
  document.getElementById("liConfirmPurpose").textContent = purpose;
  if (purpose === "Other") {
    document.getElementById("liConfirmOtherPurpose").classList.remove("hidden");
    document.getElementById("liConfirmOtherPurpose").querySelector("span").textContent = lowIncomeStep3.liOtherPurpose.value.trim();
  } else {
    document.getElementById("liConfirmOtherPurpose").classList.add("hidden");
  }
  
  lowIncomeStep4.classList.add("hidden");
  lowIncomeStep5.classList.remove("hidden");
});

function lowIncomeGoBackToStep1() {
  lowIncomeStep2.classList.add("hidden");
  lowIncomeStep1.classList.remove("hidden");
}

function lowIncomeGoBackToStep2() {
  lowIncomeStep3.classList.add("hidden");
  lowIncomeStep2.classList.remove("hidden");
}

function lowIncomeGoBackToStep3() {
  lowIncomeStep4.classList.add("hidden");
  lowIncomeStep3.classList.remove("hidden");
}

function lowIncomeEdit() {
  lowIncomeStep5.classList.add("hidden");
  lowIncomeStep1.classList.remove("hidden");
}

function lowIncomeGoToSend() {
  lowIncomeStep5.classList.add("hidden");
  lowIncomeStep6.classList.remove("hidden");
}

function lowIncomeBackToConfirmation() {
  lowIncomeStep6.classList.add("hidden");
  lowIncomeStep5.classList.remove("hidden");
}

function lowIncomeSendRequest() {
  lowIncomeStep6.classList.add("hidden");
  lowIncomeStep7.classList.remove("hidden");
}

// ---------------- First Time Job Seeker Form Logic ----------------
const jobSeekerStep1 = document.getElementById("jobSeekerStep1");
const jobSeekerStep2 = document.getElementById("jobSeekerStep2");
const jobSeekerStep3 = document.getElementById("jobSeekerStep3");
const jobSeekerStep4 = document.getElementById("jobSeekerStep4");
const jobSeekerStep5 = document.getElementById("jobSeekerStep5");
const jobSeekerStep6 = document.getElementById("jobSeekerStep6");
const jobSeekerStep7 = document.getElementById("jobSeekerStep7");

// Show/hide other purpose field based on dropdown selection
document.getElementById("jsPurpose").addEventListener('change', function() {
  document.getElementById("jsOtherPurposeContainer").classList.toggle("hidden", this.value !== "Other");
});

// Form submission handlers
jobSeekerStep1.addEventListener("submit", (e) => {
  e.preventDefault();
  const contactInput = jobSeekerStep1.jsContactNumber;
  const contactError = document.getElementById("jsContactNumberError");
  const contactVal = contactInput.value.trim();
  if (!/^\d{11,15}$/.test(contactVal)) {
    contactError.classList.remove("hidden");
    contactInput.focus();
    return;
  } else {
    contactError.classList.add("hidden");
  }
  if (!jobSeekerStep1.checkValidity()) {
    jobSeekerStep1.reportValidity();
    return;
  }
  jobSeekerStep1.classList.add("hidden");
  jobSeekerStep2.classList.remove("hidden");
});

jobSeekerStep2.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!jobSeekerStep2.checkValidity()) {
    jobSeekerStep2.reportValidity();
    return;
  }
  jobSeekerStep2.classList.add("hidden");
  jobSeekerStep3.classList.remove("hidden");
});

jobSeekerStep3.addEventListener("submit", (e) => {
  e.preventDefault();
  
  // Get the radio button values
  const isFirstJob = document.querySelector('input[name="jsFirstJob"]:checked')?.value;
  const hasReceivedBefore = document.querySelector('input[name="jsReceivedBefore"]:checked')?.value;
  
  const errorDiv = document.getElementById("jsEligibilityError");
  const errorMessage = document.getElementById("jsEligibilityErrorMessage");
  
  // Reset error state
  errorDiv.classList.add("hidden");
  
  // Validate eligibility
  if (isFirstJob !== "Yes") {
    errorMessage.textContent = "This certificate is only available for first-time job seekers. If you have worked before, you do not qualify.";
    errorDiv.classList.remove("hidden");
    return;
  }
  
  if (hasReceivedBefore !== "No") {
    errorMessage.textContent = "You can only avail of this benefit once under RA 11261. If you've received this certificate before, you cannot apply again.";
    errorDiv.classList.remove("hidden");
    return;
  }
  
  if (!jobSeekerStep3.checkValidity()) {
    jobSeekerStep3.reportValidity();
    return;
  }
  
  jobSeekerStep3.classList.add("hidden");
  jobSeekerStep4.classList.remove("hidden");
});

jobSeekerStep4.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!jobSeekerStep4.checkValidity()) {
    jobSeekerStep4.reportValidity();
    return;
  }
  
  // Fill confirmation fields
  document.getElementById("jsConfirmFullName").textContent = jobSeekerStep1.jsFullName.value.trim();
  document.getElementById("jsConfirmDOB").textContent = jobSeekerStep1.jsDOB.value;
  document.getElementById("jsConfirmSex").textContent = jobSeekerStep1.jsSex.value;
  document.getElementById("jsConfirmCivilStatus").textContent = jobSeekerStep1.jsCivilStatus.value;
  document.getElementById("jsConfirmContactNumber").textContent = jobSeekerStep1.jsContactNumber.value.trim();
  document.getElementById("jsConfirmAddress").textContent = jobSeekerStep1.jsAddress.value.trim();
  document.getElementById("jsConfirmYearsResidency").textContent = jobSeekerStep1.jsYearsResidency.value + " years";
  
  document.getElementById("jsConfirmEducation").textContent = jobSeekerStep2.jsEducation.value;
  document.getElementById("jsConfirmSchoolName").textContent = jobSeekerStep2.jsSchoolName.value.trim();
  document.getElementById("jsConfirmYearGraduated").textContent = jobSeekerStep2.jsYearGraduated.value;
  
  document.getElementById("jsConfirmFirstJob").textContent = document.querySelector('input[name="jsFirstJob"]:checked').value;
  document.getElementById("jsConfirmReceivedBefore").textContent = document.querySelector('input[name="jsReceivedBefore"]:checked').value;
  
  const purpose = jobSeekerStep3.jsPurpose.value;
  document.getElementById("jsConfirmPurpose").textContent = purpose;
  if (purpose === "Other") {
    document.getElementById("jsConfirmOtherPurpose").classList.remove("hidden");
    document.getElementById("jsConfirmOtherPurpose").querySelector("span").textContent = jobSeekerStep3.jsOtherPurpose.value.trim();
  } else {
    document.getElementById("jsConfirmOtherPurpose").classList.add("hidden");
  }
  
  jobSeekerStep4.classList.add("hidden");
  jobSeekerStep5.classList.remove("hidden");
});

// Navigation functions
function jobSeekerGoBackToStep1() {
  jobSeekerStep2.classList.add("hidden");
  jobSeekerStep1.classList.remove("hidden");
}

function jobSeekerGoBackToStep2() {
  jobSeekerStep3.classList.add("hidden");
  jobSeekerStep2.classList.remove("hidden");
}

function jobSeekerGoBackToStep3() {
  jobSeekerStep4.classList.add("hidden");
  jobSeekerStep3.classList.remove("hidden");
}

function jobSeekerEdit() {
  jobSeekerStep5.classList.add("hidden");
  jobSeekerStep1.classList.remove("hidden");
}

function jobSeekerGoToSend() {
  jobSeekerStep5.classList.add("hidden");
  jobSeekerStep6.classList.remove("hidden");
}

function jobSeekerBackToConfirmation() {
  jobSeekerStep6.classList.add("hidden");
  jobSeekerStep5.classList.remove("hidden");
}

function jobSeekerSendRequest() {
  jobSeekerStep6.classList.add("hidden");
  jobSeekerStep7.classList.remove("hidden");
}

// Business Permit Form Logic
const businessPermitStep1 = document.getElementById("businessPermitStep1");
const businessPermitStep2 = document.getElementById("businessPermitStep2");
const businessPermitStep3 = document.getElementById("businessPermitStep3");
const businessPermitStep4 = document.getElementById("businessPermitStep4");
const businessPermitStep5 = document.getElementById("businessPermitStep5");
const businessPermitStep6 = document.getElementById("businessPermitStep6");
const businessPermitStep7 = document.getElementById("businessPermitStep7");

// Show/hide other purpose field based on dropdown selection
document.getElementById("bpPurpose").addEventListener('change', function() {
  document.getElementById("bpOtherPurposeContainer").classList.toggle("hidden", this.value !== "Other (Specify)");
});

// Form submission handlers
businessPermitStep1.addEventListener("submit", (e) => {
  e.preventDefault();
  const contactInput = businessPermitStep1.bpContactNumber;
  const contactError = document.getElementById("bpContactNumberError");
  const contactVal = contactInput.value.trim();
  if (!/^\d{11,15}$/.test(contactVal)) {
    contactError.classList.remove("hidden");
    contactInput.focus();
    return;
  } else {
    contactError.classList.add("hidden");
  }
  if (!businessPermitStep1.checkValidity()) {
    businessPermitStep1.reportValidity();
    return;
  }
  businessPermitStep1.classList.add("hidden");
  businessPermitStep2.classList.remove("hidden");
});

businessPermitStep2.addEventListener("submit", (e) => {
  e.preventDefault();
  const businessContactInput = businessPermitStep2.bpBusinessContact;
  const businessContactError = document.getElementById("bpBusinessContactError");
  const businessContactVal = businessContactInput.value.trim();
  if (!/^\d{11,15}$/.test(businessContactVal)) {
    businessContactError.classList.remove("hidden");
    businessContactInput.focus();
    return;
  } else {
    businessContactError.classList.add("hidden");
  }
  if (!businessPermitStep2.checkValidity()) {
    businessPermitStep2.reportValidity();
    return;
  }
  businessPermitStep2.classList.add("hidden");
  businessPermitStep3.classList.remove("hidden");
});

businessPermitStep3.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!businessPermitStep3.checkValidity()) {
    businessPermitStep3.reportValidity();
    return;
  }
  businessPermitStep3.classList.add("hidden");
  businessPermitStep4.classList.remove("hidden");
});

businessPermitStep4.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!businessPermitStep4.checkValidity()) {
    businessPermitStep4.reportValidity();
    return;
  }
  
  // Fill confirmation fields
  document.getElementById("bpConfirmFullName").textContent = businessPermitStep1.bpFullName.value.trim();
  document.getElementById("bpConfirmDOB").textContent = businessPermitStep1.bpDOB.value;
  document.getElementById("bpConfirmSex").textContent = businessPermitStep1.bpSex.value;
  document.getElementById("bpConfirmCivilStatus").textContent = businessPermitStep1.bpCivilStatus.value;
  document.getElementById("bpConfirmContactNumber").textContent = businessPermitStep1.bpContactNumber.value.trim();
  document.getElementById("bpConfirmEmail").textContent = businessPermitStep1.bpEmail.value.trim() || "N/A";
  document.getElementById("bpConfirmAddress").textContent = businessPermitStep1.bpAddress.value.trim();
  document.getElementById("bpConfirmYearsResidency").textContent = businessPermitStep1.bpYearsResidency.value + " years";
  
  document.getElementById("bpConfirmBusinessName").textContent = businessPermitStep2.bpBusinessName.value.trim();
  document.getElementById("bpConfirmBusinessType").textContent = businessPermitStep2.bpBusinessType.value;
  document.getElementById("bpConfirmNature").textContent = businessPermitStep2.bpNature.value.trim();
  document.getElementById("bpConfirmBusinessAddress").textContent = businessPermitStep2.bpBusinessAddress.value.trim();
  document.getElementById("bpConfirmBusinessContact").textContent = businessPermitStep2.bpBusinessContact.value.trim();
  document.getElementById("bpConfirmStartDate").textContent = businessPermitStep2.bpStartDate.value;
  document.getElementById("bpConfirmEmployees").textContent = businessPermitStep2.bpEmployees.value;
  document.getElementById("bpConfirmSameAddress").textContent = document.querySelector('input[name="bpSameAddress"]:checked').value;
  
  const purpose = businessPermitStep3.bpPurpose.value;
  document.getElementById("bpConfirmPurpose").textContent = purpose;
  if (purpose === "Other (Specify)") {
    document.getElementById("bpConfirmOtherPurpose").classList.remove("hidden");
    document.getElementById("bpConfirmOtherPurpose").querySelector("span").textContent = businessPermitStep3.bpOtherPurpose.value.trim();
  } else {
    document.getElementById("bpConfirmOtherPurpose").classList.add("hidden");
  }
  
  businessPermitStep4.classList.add("hidden");
  businessPermitStep5.classList.remove("hidden");
});

// Navigation functions
function businessPermitGoBackToStep1() {
  businessPermitStep2.classList.add("hidden");
  businessPermitStep1.classList.remove("hidden");
}

function businessPermitGoBackToStep2() {
  businessPermitStep3.classList.add("hidden");
  businessPermitStep2.classList.remove("hidden");
}

function businessPermitGoBackToStep3() {
  businessPermitStep4.classList.add("hidden");
  businessPermitStep3.classList.remove("hidden");
}

function businessPermitEdit() {
  businessPermitStep5.classList.add("hidden");
  businessPermitStep1.classList.remove("hidden");
}

function businessPermitGoToSend() {
  businessPermitStep5.classList.add("hidden");
  businessPermitStep6.classList.remove("hidden");
}

function businessPermitBackToConfirmation() {
  businessPermitStep6.classList.add("hidden");
  businessPermitStep5.classList.remove("hidden");
}

function businessPermitSendRequest() {
  businessPermitStep6.classList.add("hidden");
  businessPermitStep7.classList.remove("hidden");
}

// Building Permit Form Logic
const buildingPermitStep1 = document.getElementById("buildingPermitStep1");
const buildingPermitStep2 = document.getElementById("buildingPermitStep2");
const buildingPermitStep3 = document.getElementById("buildingPermitStep3");
const buildingPermitStep4 = document.getElementById("buildingPermitStep4");
const buildingPermitStep5 = document.getElementById("buildingPermitStep5");
const buildingPermitStep6 = document.getElementById("buildingPermitStep6");

buildingPermitStep1.addEventListener("submit", (e) => {
  e.preventDefault();
  const contactInput = buildingPermitStep1.bpContactNumber;
  const contactError = document.getElementById("bpContactNumberError");
  const contactVal = contactInput.value.trim();
  if (!/^\d{11,15}$/.test(contactVal)) {
    contactError.classList.remove("hidden");
    contactInput.focus();
    return;
  } else {
    contactError.classList.add("hidden");
  }
  if (!buildingPermitStep1.checkValidity()) {
    buildingPermitStep1.reportValidity();
    return;
  }
  buildingPermitStep1.classList.add("hidden");
  buildingPermitStep2.classList.remove("hidden");
});

buildingPermitStep2.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!buildingPermitStep2.checkValidity()) {
    buildingPermitStep2.reportValidity();
    return;
  }
  buildingPermitStep2.classList.add("hidden");
  buildingPermitStep3.classList.remove("hidden");
});

buildingPermitStep3.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!buildingPermitStep3.checkValidity()) {
    buildingPermitStep3.reportValidity();
    return;
  }
  
  // Fill confirmation fields
  document.getElementById("bpConfirmFullName").textContent = buildingPermitStep1.bpFullName.value.trim();
  document.getElementById("bpConfirmContactNumber").textContent = buildingPermitStep1.bpContactNumber.value.trim();
  document.getElementById("bpConfirmAddress").textContent = buildingPermitStep1.bpAddress.value.trim();
  document.getElementById("bpConfirmConstructionType").textContent = buildingPermitStep2.bpConstructionType.value;
  document.getElementById("bpConfirmPurpose").textContent = buildingPermitStep2.bpPurpose.value.trim();
  document.getElementById("bpConfirmLocation").textContent = buildingPermitStep2.bpLocation.value.trim();
  document.getElementById("bpConfirmEstimatedCost").textContent = "₱" + buildingPermitStep2.bpEstimatedCost.value;
  document.getElementById("bpConfirmLotOwner").textContent = buildingPermitStep2.bpLotOwner.value.trim();
  
  buildingPermitStep3.classList.add("hidden");
  buildingPermitStep4.classList.remove("hidden");
});

function buildingPermitGoBackToStep1() {
  buildingPermitStep2.classList.add("hidden");
  buildingPermitStep1.classList.remove("hidden");
}

function buildingPermitGoBackToStep2() {
  buildingPermitStep3.classList.add("hidden");
  buildingPermitStep2.classList.remove("hidden");
}

function buildingPermitEdit() {
  buildingPermitStep4.classList.add("hidden");
  buildingPermitStep1.classList.remove("hidden");
}

function buildingPermitGoToSend() {
  buildingPermitStep4.classList.add("hidden");
  buildingPermitStep5.classList.remove("hidden");
}

function buildingPermitBackToConfirmation() {
  buildingPermitStep5.classList.add("hidden");
  buildingPermitStep4.classList.remove("hidden");
}

function buildingPermitSendRequest() {
  buildingPermitStep5.classList.add("hidden");
  buildingPermitStep6.classList.remove("hidden");
}

// ---------------- Sanitary Permit Form Logic ----------------
const sanitaryPermitStep1 = document.getElementById("sanitaryPermitStep1");
const sanitaryPermitStep2 = document.getElementById("sanitaryPermitStep2");
const sanitaryPermitStep3 = document.getElementById("sanitaryPermitStep3");
const sanitaryPermitStep4 = document.getElementById("sanitaryPermitStep4");
const sanitaryPermitStep5 = document.getElementById("sanitaryPermitStep5");
const sanitaryPermitStep6 = document.getElementById("sanitaryPermitStep6");

// Toggle other nature field
function toggleOtherNature(select) {
  const otherContainer = document.getElementById("spOtherNatureContainer");
  otherContainer.classList.toggle("hidden", select.value !== "Other");
}

// Toggle other premises field
function toggleOtherPremises(select) {
  const otherContainer = document.getElementById("spOtherPremisesContainer");
  otherContainer.classList.toggle("hidden", select.value !== "Other");
}

sanitaryPermitStep1.addEventListener("submit", (e) => {
  e.preventDefault();
  const contactInput = sanitaryPermitStep1.spContactNumber;
  const contactError = document.getElementById("spContactNumberError");
  const contactVal = contactInput.value.trim();
  if (!/^\d{11,15}$/.test(contactVal)) {
    contactError.classList.remove("hidden");
    contactInput.focus();
    return;
  } else {
    contactError.classList.add("hidden");
  }
  if (!sanitaryPermitStep1.checkValidity()) {
    sanitaryPermitStep1.reportValidity();
    return;
  }
  sanitaryPermitStep1.classList.add("hidden");
  sanitaryPermitStep2.classList.remove("hidden");
});

sanitaryPermitStep2.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!sanitaryPermitStep2.checkValidity()) {
    sanitaryPermitStep2.reportValidity();
    return;
  }
  sanitaryPermitStep2.classList.add("hidden");
  sanitaryPermitStep3.classList.remove("hidden");
});

sanitaryPermitStep3.addEventListener("submit", (e) => {
  e.preventDefault();
  if (!sanitaryPermitStep3.checkValidity()) {
    sanitaryPermitStep3.reportValidity();
    return;
  }
  
  // Fill confirmation fields
  document.getElementById("spConfirmFullName").textContent = sanitaryPermitStep1.spFullName.value.trim();
  document.getElementById("spConfirmContactNumber").textContent = sanitaryPermitStep1.spContactNumber.value.trim();
  document.getElementById("spConfirmAddress").textContent = sanitaryPermitStep1.spAddress.value.trim();
  
  document.getElementById("spConfirmBusinessName").textContent = sanitaryPermitStep2.spBusinessName.value.trim();
  
  const nature = sanitaryPermitStep2.spNature.value;
  document.getElementById("spConfirmNature").textContent = nature;
  if (nature === "Other") {
    document.getElementById("spConfirmOtherNature").classList.remove("hidden");
    document.getElementById("spConfirmOtherNature").querySelector("span").textContent = sanitaryPermitStep2.spOtherNature.value.trim();
  } else {
    document.getElementById("spConfirmOtherNature").classList.add("hidden");
  }
  
  document.getElementById("spConfirmBusinessAddress").textContent = sanitaryPermitStep2.spBusinessAddress.value.trim();
  
  const premises = sanitaryPermitStep2.spPremisesType.value;
  document.getElementById("spConfirmPremisesType").textContent = premises;
  if (premises === "Other") {
    document.getElementById("spConfirmOtherPremises").classList.remove("hidden");
    document.getElementById("spConfirmOtherPremises").querySelector("span").textContent = sanitaryPermitStep2.spOtherPremises.value.trim();
  } else {
    document.getElementById("spConfirmOtherPremises").classList.add("hidden");
  }
  
  document.getElementById("spConfirmEmployees").textContent = sanitaryPermitStep2.spEmployees.value;
  document.getElementById("spConfirmStartDate").textContent = sanitaryPermitStep2.spStartDate.value;
  
  sanitaryPermitStep3.classList.add("hidden");
  sanitaryPermitStep4.classList.remove("hidden");
});

function sanitaryPermitGoBackToStep1() {
  sanitaryPermitStep2.classList.add("hidden");
  sanitaryPermitStep1.classList.remove("hidden");
}

function sanitaryPermitGoBackToStep2() {
  sanitaryPermitStep3.classList.add("hidden");
  sanitaryPermitStep2.classList.remove("hidden");
}

function sanitaryPermitEdit() {
  sanitaryPermitStep4.classList.add("hidden");
  sanitaryPermitStep1.classList.remove("hidden");
}

function sanitaryPermitGoToSend() {
  sanitaryPermitStep4.classList.add("hidden");
  sanitaryPermitStep5.classList.remove("hidden");
}

function sanitaryPermitBackToConfirmation() {
  sanitaryPermitStep5.classList.add("hidden");
  sanitaryPermitStep4.classList.remove("hidden");
}

function sanitaryPermitSendRequest() {
  sanitaryPermitStep5.classList.add("hidden");
  sanitaryPermitStep6.classList.remove("hidden");
}
</script>
</body>
</html>